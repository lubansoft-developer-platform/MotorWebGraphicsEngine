define(["exports","./when-7ef6387a","./Check-ed6a1804","./Math-85667bf9","./Ellipsoid-1cbb4ac9","./RuntimeError-5b606d78","./Cartesian2-73569d25"],(function(e,t,r,n,a,i,o){"use strict";function s(e){this._ellipsoid=t.defaultValue(e,a.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(s.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),s.prototype.project=function(e,r){var n=this._semimajorAxis,i=e.longitude*n,o=e.latitude*n,s=e.height;return t.defined(r)?(r.x=i,r.y=o,r.z=s,r):new a.Cartesian3(i,o,s)},s.prototype.unproject=function(e,n){if(!t.defined(e))throw new r.DeveloperError("cartesian is required");var i=this._oneOverSemimajorAxis,o=e.x*i,s=e.y*i,u=e.z;return t.defined(n)?(n.longitude=o,n.latitude=s,n.height=u,n):new a.Cartographic(o,s,u)};var u=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function c(e,r){this.start=t.defaultValue(e,0),this.stop=t.defaultValue(r,0)}function l(e,r,n,a,i,o,s,u,c){this[0]=t.defaultValue(e,0),this[1]=t.defaultValue(a,0),this[2]=t.defaultValue(s,0),this[3]=t.defaultValue(r,0),this[4]=t.defaultValue(i,0),this[5]=t.defaultValue(u,0),this[6]=t.defaultValue(n,0),this[7]=t.defaultValue(o,0),this[8]=t.defaultValue(c,0)}l.packedLength=9,l.pack=function(e,n,a){return r.Check.typeOf.object("value",e),r.Check.defined("array",n),a=t.defaultValue(a,0),n[a++]=e[0],n[a++]=e[1],n[a++]=e[2],n[a++]=e[3],n[a++]=e[4],n[a++]=e[5],n[a++]=e[6],n[a++]=e[7],n[a++]=e[8],n},l.unpack=function(e,n,a){return r.Check.defined("array",e),n=t.defaultValue(n,0),t.defined(a)||(a=new l),a[0]=e[n++],a[1]=e[n++],a[2]=e[n++],a[3]=e[n++],a[4]=e[n++],a[5]=e[n++],a[6]=e[n++],a[7]=e[n++],a[8]=e[n++],a},l.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r):new l(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},l.fromArray=function(e,n,a){return r.Check.defined("array",e),n=t.defaultValue(n,0),t.defined(a)||(a=new l),a[0]=e[n],a[1]=e[n+1],a[2]=e[n+2],a[3]=e[n+3],a[4]=e[n+4],a[5]=e[n+5],a[6]=e[n+6],a[7]=e[n+7],a[8]=e[n+8],a},l.fromColumnMajorArray=function(e,t){return r.Check.defined("values",e),l.clone(e,t)},l.fromRowMajorArray=function(e,n){return r.Check.defined("values",e),t.defined(n)?(n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8],n):new l(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},l.fromQuaternion=function(e,n){r.Check.typeOf.object("quaternion",e);var a=e.x*e.x,i=e.x*e.y,o=e.x*e.z,s=e.x*e.w,u=e.y*e.y,c=e.y*e.z,f=e.y*e.w,d=e.z*e.z,h=e.z*e.w,p=e.w*e.w,y=a-u-d+p,m=2*(i-h),C=2*(o+f),w=2*(i+h),v=-a+u-d+p,O=2*(c-s),b=2*(o-f),g=2*(c+s),x=-a-u+d+p;return t.defined(n)?(n[0]=y,n[1]=w,n[2]=b,n[3]=m,n[4]=v,n[5]=g,n[6]=C,n[7]=O,n[8]=x,n):new l(y,m,C,w,v,O,b,g,x)},l.fromHeadingPitchRoll=function(e,n){r.Check.typeOf.object("headingPitchRoll",e);var a=Math.cos(-e.pitch),i=Math.cos(-e.heading),o=Math.cos(e.roll),s=Math.sin(-e.pitch),u=Math.sin(-e.heading),c=Math.sin(e.roll),f=a*i,d=-o*u+c*s*i,h=c*u+o*s*i,p=a*u,y=o*i+c*s*u,m=-c*i+o*s*u,C=-s,w=c*a,v=o*a;return t.defined(n)?(n[0]=f,n[1]=p,n[2]=C,n[3]=d,n[4]=y,n[5]=w,n[6]=h,n[7]=m,n[8]=v,n):new l(f,d,h,p,y,m,C,w,v)},l.fromScale=function(e,n){return r.Check.typeOf.object("scale",e),t.defined(n)?(n[0]=e.x,n[1]=0,n[2]=0,n[3]=0,n[4]=e.y,n[5]=0,n[6]=0,n[7]=0,n[8]=e.z,n):new l(e.x,0,0,0,e.y,0,0,0,e.z)},l.fromUniformScale=function(e,n){return r.Check.typeOf.number("scale",e),t.defined(n)?(n[0]=e,n[1]=0,n[2]=0,n[3]=0,n[4]=e,n[5]=0,n[6]=0,n[7]=0,n[8]=e,n):new l(e,0,0,0,e,0,0,0,e)},l.fromCrossProduct=function(e,n){return r.Check.typeOf.object("vector",e),t.defined(n)?(n[0]=0,n[1]=e.z,n[2]=-e.y,n[3]=-e.z,n[4]=0,n[5]=e.x,n[6]=e.y,n[7]=-e.x,n[8]=0,n):new l(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},l.fromRotationX=function(e,n){r.Check.typeOf.number("angle",e);var a=Math.cos(e),i=Math.sin(e);return t.defined(n)?(n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=a,n[5]=i,n[6]=0,n[7]=-i,n[8]=a,n):new l(1,0,0,0,a,-i,0,i,a)},l.fromRotationY=function(e,n){r.Check.typeOf.number("angle",e);var a=Math.cos(e),i=Math.sin(e);return t.defined(n)?(n[0]=a,n[1]=0,n[2]=-i,n[3]=0,n[4]=1,n[5]=0,n[6]=i,n[7]=0,n[8]=a,n):new l(a,0,i,0,1,0,-i,0,a)},l.fromRotationZ=function(e,n){r.Check.typeOf.number("angle",e);var a=Math.cos(e),i=Math.sin(e);return t.defined(n)?(n[0]=a,n[1]=i,n[2]=0,n[3]=-i,n[4]=a,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n):new l(a,-i,0,i,a,0,0,0,1)},l.toArray=function(e,n){return r.Check.typeOf.object("matrix",e),t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},l.getElementIndex=function(e,t){return r.Check.typeOf.number.greaterThanOrEquals("row",t,0),r.Check.typeOf.number.lessThanOrEquals("row",t,2),r.Check.typeOf.number.greaterThanOrEquals("column",e,0),r.Check.typeOf.number.lessThanOrEquals("column",e,2),3*e+t},l.getColumn=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.number.greaterThanOrEquals("index",t,0),r.Check.typeOf.number.lessThanOrEquals("index",t,2),r.Check.typeOf.object("result",n);var a=3*t,i=e[a],o=e[a+1],s=e[a+2];return n.x=i,n.y=o,n.z=s,n},l.setColumn=function(e,t,n,a){r.Check.typeOf.object("matrix",e),r.Check.typeOf.number.greaterThanOrEquals("index",t,0),r.Check.typeOf.number.lessThanOrEquals("index",t,2),r.Check.typeOf.object("cartesian",n),r.Check.typeOf.object("result",a);var i=3*t;return(a=l.clone(e,a))[i]=n.x,a[i+1]=n.y,a[i+2]=n.z,a},l.getRow=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.number.greaterThanOrEquals("index",t,0),r.Check.typeOf.number.lessThanOrEquals("index",t,2),r.Check.typeOf.object("result",n);var a=e[t],i=e[t+3],o=e[t+6];return n.x=a,n.y=i,n.z=o,n},l.setRow=function(e,t,n,a){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.number.greaterThanOrEquals("index",t,0),r.Check.typeOf.number.lessThanOrEquals("index",t,2),r.Check.typeOf.object("cartesian",n),r.Check.typeOf.object("result",a),(a=l.clone(e,a))[t]=n.x,a[t+3]=n.y,a[t+6]=n.z,a};var f=new a.Cartesian3;l.getScale=function(e,t){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t),t.x=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[0],e[1],e[2],f)),t.y=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[3],e[4],e[5],f)),t.z=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[6],e[7],e[8],f)),t};var d=new a.Cartesian3;l.getMaximumScale=function(e){return l.getScale(e,d),a.Cartesian3.maximumComponent(d)},l.multiply=function(e,t,n){r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n);var a=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],i=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],o=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],s=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],u=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],c=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],l=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],f=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],d=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=a,n[1]=i,n[2]=o,n[3]=s,n[4]=u,n[5]=c,n[6]=l,n[7]=f,n[8]=d,n},l.add=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n},l.subtract=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n},l.multiplyByVector=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("cartesian",t),r.Check.typeOf.object("result",n);var a=t.x,i=t.y,o=t.z,s=e[0]*a+e[3]*i+e[6]*o,u=e[1]*a+e[4]*i+e[7]*o,c=e[2]*a+e[5]*i+e[8]*o;return n.x=s,n.y=u,n.z=c,n},l.multiplyByScalar=function(e,t,n){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n},l.multiplyByScale=function(e,t,n){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("scale",t),r.Check.typeOf.object("result",n),n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n},l.negate=function(e,t){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},l.transpose=function(e,t){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t);var n=e[0],a=e[3],i=e[6],o=e[1],s=e[4],u=e[7],c=e[2],l=e[5],f=e[8];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t};var h=new a.Cartesian3(1,1,1);l.getRotation=function(e,t){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t);var n=a.Cartesian3.divideComponents(h,l.getScale(e,d),d);return t=l.multiplyByScale(e,n,t)};var p=[1,0,0],y=[2,2,1];function m(e){for(var t=0,r=0;r<3;++r){var n=e[l.getElementIndex(y[r],p[r])];t+=2*n*n}return Math.sqrt(t)}function C(e,t){for(var r=n.CesiumMath.EPSILON15,a=0,i=1,o=0;o<3;++o){var s=Math.abs(e[l.getElementIndex(y[o],p[o])]);s>a&&(i=o,a=s)}var u=1,c=0,f=p[i],d=y[i];if(Math.abs(e[l.getElementIndex(d,f)])>r){var h,m=(e[l.getElementIndex(d,d)]-e[l.getElementIndex(f,f)])/2/e[l.getElementIndex(d,f)];c=(h=m<0?-1/(-m+Math.sqrt(1+m*m)):1/(m+Math.sqrt(1+m*m)))*(u=1/Math.sqrt(1+h*h))}return(t=l.clone(l.IDENTITY,t))[l.getElementIndex(f,f)]=t[l.getElementIndex(d,d)]=u,t[l.getElementIndex(d,f)]=c,t[l.getElementIndex(f,d)]=-c,t}var w=new l,v=new l;function O(e,r,n,a){this.x=t.defaultValue(e,0),this.y=t.defaultValue(r,0),this.z=t.defaultValue(n,0),this.w=t.defaultValue(a,0)}l.computeEigenDecomposition=function(e,a){r.Check.typeOf.object("matrix",e);var i=n.CesiumMath.EPSILON20,o=0,s=0;t.defined(a)||(a={});for(var u=a.unitary=l.clone(l.IDENTITY,a.unitary),c=a.diagonal=l.clone(e,a.diagonal),f=i*function(e){for(var t=0,r=0;r<9;++r){var n=e[r];t+=n*n}return Math.sqrt(t)}(c);s<10&&m(c)>f;)C(c,w),l.transpose(w,v),l.multiply(c,w,c),l.multiply(v,c,c),l.multiply(u,w,u),++o>2&&(++s,o=0);return a},l.abs=function(e,t){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},l.determinant=function(e){r.Check.typeOf.object("matrix",e);var t=e[0],n=e[3],a=e[6],i=e[1],o=e[4],s=e[7],u=e[2],c=e[5],l=e[8];return t*(o*l-c*s)+i*(c*a-n*l)+u*(n*s-o*a)},l.inverse=function(e,t){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t);var a=e[0],i=e[1],o=e[2],s=e[3],u=e[4],c=e[5],f=e[6],d=e[7],h=e[8],p=l.determinant(e);if(Math.abs(p)<=n.CesiumMath.EPSILON15)throw new r.DeveloperError("matrix is not invertible");t[0]=u*h-d*c,t[1]=d*o-i*h,t[2]=i*c-u*o,t[3]=f*c-s*h,t[4]=a*h-f*o,t[5]=s*o-a*c,t[6]=s*d-f*u,t[7]=f*i-a*d,t[8]=a*u-s*i;var y=1/p;return l.multiplyByScalar(t,y,t)},l.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]},l.equalsEpsilon=function(e,n,a){return r.Check.typeOf.number("epsilon",a),e===n||t.defined(e)&&t.defined(n)&&Math.abs(e[0]-n[0])<=a&&Math.abs(e[1]-n[1])<=a&&Math.abs(e[2]-n[2])<=a&&Math.abs(e[3]-n[3])<=a&&Math.abs(e[4]-n[4])<=a&&Math.abs(e[5]-n[5])<=a&&Math.abs(e[6]-n[6])<=a&&Math.abs(e[7]-n[7])<=a&&Math.abs(e[8]-n[8])<=a},l.IDENTITY=Object.freeze(new l(1,0,0,0,1,0,0,0,1)),l.ZERO=Object.freeze(new l(0,0,0,0,0,0,0,0,0)),l.COLUMN0ROW0=0,l.COLUMN0ROW1=1,l.COLUMN0ROW2=2,l.COLUMN1ROW0=3,l.COLUMN1ROW1=4,l.COLUMN1ROW2=5,l.COLUMN2ROW0=6,l.COLUMN2ROW1=7,l.COLUMN2ROW2=8,Object.defineProperties(l.prototype,{length:{get:function(){return l.packedLength}}}),l.prototype.clone=function(e){return l.clone(this,e)},l.prototype.equals=function(e){return l.equals(this,e)},l.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},l.prototype.equalsEpsilon=function(e,t){return l.equalsEpsilon(this,e,t)},l.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},O.fromElements=function(e,r,n,a,i){return t.defined(i)?(i.x=e,i.y=r,i.z=n,i.w=a,i):new O(e,r,n,a)},O.fromColor=function(e,n){return r.Check.typeOf.object("color",e),t.defined(n)?(n.x=e.red,n.y=e.green,n.z=e.blue,n.w=e.alpha,n):new O(e.red,e.green,e.blue,e.alpha)},O.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.x=e.x,r.y=e.y,r.z=e.z,r.w=e.w,r):new O(e.x,e.y,e.z,e.w)},O.packedLength=4,O.pack=function(e,n,a){return r.Check.typeOf.object("value",e),r.Check.defined("array",n),a=t.defaultValue(a,0),n[a++]=e.x,n[a++]=e.y,n[a++]=e.z,n[a]=e.w,n},O.unpack=function(e,n,a){return r.Check.defined("array",e),n=t.defaultValue(n,0),t.defined(a)||(a=new O),a.x=e[n++],a.y=e[n++],a.z=e[n++],a.w=e[n],a},O.packArray=function(e,n){r.Check.defined("array",e);var a=e.length,i=4*a;if(t.defined(n)){if(!Array.isArray(n)&&n.length!==i)throw new r.DeveloperError("If result is a typed array, it must have exactly array.length * 4 elements");n.length!==i&&(n.length=i)}else n=new Array(i);for(var o=0;o<a;++o)O.pack(e[o],n,4*o);return n},O.unpackArray=function(e,n){if(r.Check.defined("array",e),r.Check.typeOf.number.greaterThanOrEquals("array.length",e.length,4),e.length%4!=0)throw new r.DeveloperError("array length must be a multiple of 4.");var a=e.length;t.defined(n)?n.length=a/4:n=new Array(a/4);for(var i=0;i<a;i+=4){var o=i/4;n[o]=O.unpack(e,i,n[o])}return n},O.fromArray=O.unpack,O.maximumComponent=function(e){return r.Check.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z,e.w)},O.minimumComponent=function(e){return r.Check.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z,e.w)},O.minimumByComponent=function(e,t,n){return r.Check.typeOf.object("first",e),r.Check.typeOf.object("second",t),r.Check.typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n.w=Math.min(e.w,t.w),n},O.maximumByComponent=function(e,t,n){return r.Check.typeOf.object("first",e),r.Check.typeOf.object("second",t),r.Check.typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n.w=Math.max(e.w,t.w),n},O.magnitudeSquared=function(e){return r.Check.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},O.magnitude=function(e){return Math.sqrt(O.magnitudeSquared(e))};var b=new O;O.distance=function(e,t){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),O.subtract(e,t,b),O.magnitude(b)},O.distanceSquared=function(e,t){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),O.subtract(e,t,b),O.magnitudeSquared(b)},O.normalize=function(e,t){r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t);var n=O.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))throw new r.DeveloperError("normalized result is not a number");return t},O.dot=function(e,t){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},O.multiplyComponents=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n.w=e.w*t.w,n},O.divideComponents=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n.w=e.w/t.w,n},O.add=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},O.subtract=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},O.multiplyByScalar=function(e,t,n){return r.Check.typeOf.object("cartesian",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},O.divideByScalar=function(e,t,n){return r.Check.typeOf.object("cartesian",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},O.negate=function(e,t){return r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},O.abs=function(e,t){return r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var g=new O;O.lerp=function(e,t,n,a){return r.Check.typeOf.object("start",e),r.Check.typeOf.object("end",t),r.Check.typeOf.number("t",n),r.Check.typeOf.object("result",a),O.multiplyByScalar(t,n,g),a=O.multiplyByScalar(e,1-n,a),O.add(g,a,a)};var x=new O;O.mostOrthogonalAxis=function(e,t){r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t);var n=O.normalize(e,x);return O.abs(n,n),t=n.x<=n.y?n.x<=n.z?n.x<=n.w?O.clone(O.UNIT_X,t):O.clone(O.UNIT_W,t):n.z<=n.w?O.clone(O.UNIT_Z,t):O.clone(O.UNIT_W,t):n.y<=n.z?n.y<=n.w?O.clone(O.UNIT_Y,t):O.clone(O.UNIT_W,t):n.z<=n.w?O.clone(O.UNIT_Z,t):O.clone(O.UNIT_W,t)},O.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.w===r.w},O.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},O.equalsEpsilon=function(e,r,a,i){return e===r||t.defined(e)&&t.defined(r)&&n.CesiumMath.equalsEpsilon(e.x,r.x,a,i)&&n.CesiumMath.equalsEpsilon(e.y,r.y,a,i)&&n.CesiumMath.equalsEpsilon(e.z,r.z,a,i)&&n.CesiumMath.equalsEpsilon(e.w,r.w,a,i)},O.ZERO=Object.freeze(new O(0,0,0,0)),O.UNIT_X=Object.freeze(new O(1,0,0,0)),O.UNIT_Y=Object.freeze(new O(0,1,0,0)),O.UNIT_Z=Object.freeze(new O(0,0,1,0)),O.UNIT_W=Object.freeze(new O(0,0,0,1)),O.prototype.clone=function(e){return O.clone(this,e)},O.prototype.equals=function(e){return O.equals(this,e)},O.prototype.equalsEpsilon=function(e,t,r){return O.equalsEpsilon(this,e,t,r)},O.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var E=new Float32Array(1);function k(e,r,n,a,i,o,s,u,c,l,f,d,h,p,y,m){this[0]=t.defaultValue(e,0),this[1]=t.defaultValue(i,0),this[2]=t.defaultValue(c,0),this[3]=t.defaultValue(h,0),this[4]=t.defaultValue(r,0),this[5]=t.defaultValue(o,0),this[6]=t.defaultValue(l,0),this[7]=t.defaultValue(p,0),this[8]=t.defaultValue(n,0),this[9]=t.defaultValue(s,0),this[10]=t.defaultValue(f,0),this[11]=t.defaultValue(y,0),this[12]=t.defaultValue(a,0),this[13]=t.defaultValue(u,0),this[14]=t.defaultValue(d,0),this[15]=t.defaultValue(m,0)}O.packFloat=function(e,a){if(r.Check.typeOf.number("value",e),t.defined(a)||(a=new O),E[0]=e,0===(e=E[0]))return O.clone(O.ZERO,a);var i,o=e<0?1:0;isFinite(e)?(e=Math.abs(e),i=Math.floor(n.CesiumMath.logBase(e,10))+1,e/=Math.pow(10,i)):(e=.1,i=38);var s=256*e;return a.x=Math.floor(s),s=256*(s-a.x),a.y=Math.floor(s),s=256*(s-a.y),a.z=Math.floor(s),a.w=2*(i+38)+o,a},O.unpackFloat=function(e){r.Check.typeOf.object("packedFloat",e);var t=e.w/2,n=Math.floor(t),a=2*(t-n);if(a=-(a=2*a-1),(n-=38)>=38)return a<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;var i=a*e.x*(1/256);return i+=a*e.y*(1/65536),(i+=a*e.z*(1/16777216))*Math.pow(10,n)},k.packedLength=16,k.pack=function(e,n,a){return r.Check.typeOf.object("value",e),r.Check.defined("array",n),a=t.defaultValue(a,0),n[a++]=e[0],n[a++]=e[1],n[a++]=e[2],n[a++]=e[3],n[a++]=e[4],n[a++]=e[5],n[a++]=e[6],n[a++]=e[7],n[a++]=e[8],n[a++]=e[9],n[a++]=e[10],n[a++]=e[11],n[a++]=e[12],n[a++]=e[13],n[a++]=e[14],n[a]=e[15],n},k.unpack=function(e,n,a){return r.Check.defined("array",e),n=t.defaultValue(n,0),t.defined(a)||(a=new k),a[0]=e[n++],a[1]=e[n++],a[2]=e[n++],a[3]=e[n++],a[4]=e[n++],a[5]=e[n++],a[6]=e[n++],a[7]=e[n++],a[8]=e[n++],a[9]=e[n++],a[10]=e[n++],a[11]=e[n++],a[12]=e[n++],a[13]=e[n++],a[14]=e[n++],a[15]=e[n],a},k.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r):new k(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},k.fromArray=k.unpack,k.fromColumnMajorArray=function(e,t){return r.Check.defined("values",e),k.clone(e,t)},k.fromRowMajorArray=function(e,n){return r.Check.defined("values",e),t.defined(n)?(n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15],n):new k(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},k.fromRotationTranslation=function(e,n,i){return r.Check.typeOf.object("rotation",e),n=t.defaultValue(n,a.Cartesian3.ZERO),t.defined(i)?(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=0,i[4]=e[3],i[5]=e[4],i[6]=e[5],i[7]=0,i[8]=e[6],i[9]=e[7],i[10]=e[8],i[11]=0,i[12]=n.x,i[13]=n.y,i[14]=n.z,i[15]=1,i):new k(e[0],e[3],e[6],n.x,e[1],e[4],e[7],n.y,e[2],e[5],e[8],n.z,0,0,0,1)},k.fromTranslationQuaternionRotationScale=function(e,n,a,i){r.Check.typeOf.object("translation",e),r.Check.typeOf.object("rotation",n),r.Check.typeOf.object("scale",a),t.defined(i)||(i=new k);var o=a.x,s=a.y,u=a.z,c=n.x*n.x,l=n.x*n.y,f=n.x*n.z,d=n.x*n.w,h=n.y*n.y,p=n.y*n.z,y=n.y*n.w,m=n.z*n.z,C=n.z*n.w,w=n.w*n.w,v=c-h-m+w,O=2*(l-C),b=2*(f+y),g=2*(l+C),x=-c+h-m+w,E=2*(p-d),q=2*(f-y),j=2*(p+d),_=-c-h+m+w;return i[0]=v*o,i[1]=g*o,i[2]=q*o,i[3]=0,i[4]=O*s,i[5]=x*s,i[6]=j*s,i[7]=0,i[8]=b*u,i[9]=E*u,i[10]=_*u,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,i},k.fromTranslationRotationScale=function(e,t){return r.Check.typeOf.object("translationRotationScale",e),k.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},k.fromTranslation=function(e,t){return r.Check.typeOf.object("translation",e),k.fromRotationTranslation(l.IDENTITY,e,t)},k.fromScale=function(e,n){return r.Check.typeOf.object("scale",e),t.defined(n)?(n[0]=e.x,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e.y,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e.z,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n):new k(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},k.fromUniformScale=function(e,n){return r.Check.typeOf.number("scale",e),t.defined(n)?(n[0]=e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n):new k(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var q=new a.Cartesian3,j=new a.Cartesian3,_=new a.Cartesian3;k.fromCamera=function(e,n){r.Check.typeOf.object("camera",e);var i=e.position,o=e.direction,s=e.up;r.Check.typeOf.object("camera.position",i),r.Check.typeOf.object("camera.direction",o),r.Check.typeOf.object("camera.up",s),a.Cartesian3.normalize(o,q),a.Cartesian3.normalize(a.Cartesian3.cross(q,s,j),j),a.Cartesian3.normalize(a.Cartesian3.cross(j,q,_),_);var u=j.x,c=j.y,l=j.z,f=q.x,d=q.y,h=q.z,p=_.x,y=_.y,m=_.z,C=i.x,w=i.y,v=i.z,O=u*-C+c*-w+l*-v,b=p*-C+y*-w+m*-v,g=f*C+d*w+h*v;return t.defined(n)?(n[0]=u,n[1]=p,n[2]=-f,n[3]=0,n[4]=c,n[5]=y,n[6]=-d,n[7]=0,n[8]=l,n[9]=m,n[10]=-h,n[11]=0,n[12]=O,n[13]=b,n[14]=g,n[15]=1,n):new k(u,c,l,O,p,y,m,b,-f,-d,-h,g,0,0,0,1)},k.computePerspectiveFieldOfView=function(e,t,n,a,i){r.Check.typeOf.number.greaterThan("fovY",e,0),r.Check.typeOf.number.lessThan("fovY",e,Math.PI),r.Check.typeOf.number.greaterThan("near",n,0),r.Check.typeOf.number.greaterThan("far",a,0),r.Check.typeOf.object("result",i);var o=1/Math.tan(.5*e),s=o/t,u=(a+n)/(n-a),c=2*a*n/(n-a);return i[0]=s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=u,i[11]=-1,i[12]=0,i[13]=0,i[14]=c,i[15]=0,i},k.computeOrthographicOffCenter=function(e,t,n,a,i,o,s){r.Check.typeOf.number("left",e),r.Check.typeOf.number("right",t),r.Check.typeOf.number("bottom",n),r.Check.typeOf.number("top",a),r.Check.typeOf.number("near",i),r.Check.typeOf.number("far",o),r.Check.typeOf.object("result",s);var u=1/(t-e),c=1/(a-n),l=1/(o-i),f=-(t+e)*u,d=-(a+n)*c,h=-(o+i)*l;return u*=2,c*=2,l*=-2,s[0]=u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=c,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=l,s[11]=0,s[12]=f,s[13]=d,s[14]=h,s[15]=1,s},k.computePerspectiveOffCenter=function(e,t,n,a,i,o,s){r.Check.typeOf.number("left",e),r.Check.typeOf.number("right",t),r.Check.typeOf.number("bottom",n),r.Check.typeOf.number("top",a),r.Check.typeOf.number("near",i),r.Check.typeOf.number("far",o),r.Check.typeOf.object("result",s);var u=2*i/(t-e),c=2*i/(a-n),l=(t+e)/(t-e),f=(a+n)/(a-n),d=-(o+i)/(o-i),h=-2*o*i/(o-i);return s[0]=u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=c,s[6]=0,s[7]=0,s[8]=l,s[9]=f,s[10]=d,s[11]=-1,s[12]=0,s[13]=0,s[14]=h,s[15]=0,s},k.computeInfinitePerspectiveOffCenter=function(e,t,n,a,i,o){r.Check.typeOf.number("left",e),r.Check.typeOf.number("right",t),r.Check.typeOf.number("bottom",n),r.Check.typeOf.number("top",a),r.Check.typeOf.number("near",i),r.Check.typeOf.object("result",o);var s=2*i/(t-e),u=2*i/(a-n),c=(t+e)/(t-e),l=(a+n)/(a-n),f=-2*i;return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=c,o[9]=l,o[10]=-1,o[11]=-1,o[12]=0,o[13]=0,o[14]=f,o[15]=0,o},k.computeViewportTransformation=function(e,n,a,i){r.Check.typeOf.object("result",i),e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var o=t.defaultValue(e.x,0),s=t.defaultValue(e.y,0),u=t.defaultValue(e.width,0),c=t.defaultValue(e.height,0);n=t.defaultValue(n,0);var l=.5*u,f=.5*c,d=.5*((a=t.defaultValue(a,1))-n),h=l,p=f,y=d,m=o+l,C=s+f,w=n+d;return i[0]=h,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=p,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=y,i[11]=0,i[12]=m,i[13]=C,i[14]=w,i[15]=1,i},k.computeView=function(e,t,n,i,o){return r.Check.typeOf.object("position",e),r.Check.typeOf.object("direction",t),r.Check.typeOf.object("up",n),r.Check.typeOf.object("right",i),r.Check.typeOf.object("result",o),o[0]=i.x,o[1]=n.x,o[2]=-t.x,o[3]=0,o[4]=i.y,o[5]=n.y,o[6]=-t.y,o[7]=0,o[8]=i.z,o[9]=n.z,o[10]=-t.z,o[11]=0,o[12]=-a.Cartesian3.dot(i,e),o[13]=-a.Cartesian3.dot(n,e),o[14]=a.Cartesian3.dot(t,e),o[15]=1,o},k.toArray=function(e,n){return r.Check.typeOf.object("matrix",e),t.defined(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},k.getElementIndex=function(e,t){return r.Check.typeOf.number.greaterThanOrEquals("row",t,0),r.Check.typeOf.number.lessThanOrEquals("row",t,3),r.Check.typeOf.number.greaterThanOrEquals("column",e,0),r.Check.typeOf.number.lessThanOrEquals("column",e,3),4*e+t},k.getColumn=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.number.greaterThanOrEquals("index",t,0),r.Check.typeOf.number.lessThanOrEquals("index",t,3),r.Check.typeOf.object("result",n);var a=4*t,i=e[a],o=e[a+1],s=e[a+2],u=e[a+3];return n.x=i,n.y=o,n.z=s,n.w=u,n},k.setColumn=function(e,t,n,a){r.Check.typeOf.object("matrix",e),r.Check.typeOf.number.greaterThanOrEquals("index",t,0),r.Check.typeOf.number.lessThanOrEquals("index",t,3),r.Check.typeOf.object("cartesian",n),r.Check.typeOf.object("result",a);var i=4*t;return(a=k.clone(e,a))[i]=n.x,a[i+1]=n.y,a[i+2]=n.z,a[i+3]=n.w,a},k.setTranslation=function(e,t,n){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("translation",t),r.Check.typeOf.object("result",n),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=e[15],n};var S=new a.Cartesian3;k.setScale=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("scale",t),r.Check.typeOf.object("result",n);var i=k.getScale(e,S),o=a.Cartesian3.divideComponents(t,i,S);return k.multiplyByScale(e,o,n)},k.getRow=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.number.greaterThanOrEquals("index",t,0),r.Check.typeOf.number.lessThanOrEquals("index",t,3),r.Check.typeOf.object("result",n);var a=e[t],i=e[t+4],o=e[t+8],s=e[t+12];return n.x=a,n.y=i,n.z=o,n.w=s,n},k.setRow=function(e,t,n,a){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.number.greaterThanOrEquals("index",t,0),r.Check.typeOf.number.lessThanOrEquals("index",t,3),r.Check.typeOf.object("cartesian",n),r.Check.typeOf.object("result",a),(a=k.clone(e,a))[t]=n.x,a[t+4]=n.y,a[t+8]=n.z,a[t+12]=n.w,a};var M=new a.Cartesian3;k.getScale=function(e,t){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t),t.x=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[0],e[1],e[2],M)),t.y=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[4],e[5],e[6],M)),t.z=a.Cartesian3.magnitude(a.Cartesian3.fromElements(e[8],e[9],e[10],M)),t};var T=new a.Cartesian3;k.getMaximumScale=function(e){return k.getScale(e,T),a.Cartesian3.maximumComponent(T)},k.multiply=function(e,t,n){r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n);var a=e[0],i=e[1],o=e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],d=e[8],h=e[9],p=e[10],y=e[11],m=e[12],C=e[13],w=e[14],v=e[15],O=t[0],b=t[1],g=t[2],x=t[3],E=t[4],k=t[5],q=t[6],j=t[7],_=t[8],S=t[9],M=t[10],T=t[11],D=t[12],R=t[13],A=t[14],z=t[15],I=a*O+u*b+d*g+m*x,P=i*O+c*b+h*g+C*x,N=o*O+l*b+p*g+w*x,U=s*O+f*b+y*g+v*x,F=a*E+u*k+d*q+m*j,V=i*E+c*k+h*q+C*j,L=o*E+l*k+p*q+w*j,B=s*E+f*k+y*q+v*j,W=a*_+u*S+d*M+m*T,Y=i*_+c*S+h*M+C*T,Z=o*_+l*S+p*M+w*T,H=s*_+f*S+y*M+v*T,X=a*D+u*R+d*A+m*z,J=i*D+c*R+h*A+C*z,G=o*D+l*R+p*A+w*z,Q=s*D+f*R+y*A+v*z;return n[0]=I,n[1]=P,n[2]=N,n[3]=U,n[4]=F,n[5]=V,n[6]=L,n[7]=B,n[8]=W,n[9]=Y,n[10]=Z,n[11]=H,n[12]=X,n[13]=J,n[14]=G,n[15]=Q,n},k.add=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n},k.subtract=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n},k.multiplyTransformation=function(e,t,n){r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n);var a=e[0],i=e[1],o=e[2],s=e[4],u=e[5],c=e[6],l=e[8],f=e[9],d=e[10],h=e[12],p=e[13],y=e[14],m=t[0],C=t[1],w=t[2],v=t[4],O=t[5],b=t[6],g=t[8],x=t[9],E=t[10],k=t[12],q=t[13],j=t[14],_=a*m+s*C+l*w,S=i*m+u*C+f*w,M=o*m+c*C+d*w,T=a*v+s*O+l*b,D=i*v+u*O+f*b,R=o*v+c*O+d*b,A=a*g+s*x+l*E,z=i*g+u*x+f*E,I=o*g+c*x+d*E,P=a*k+s*q+l*j+h,N=i*k+u*q+f*j+p,U=o*k+c*q+d*j+y;return n[0]=_,n[1]=S,n[2]=M,n[3]=0,n[4]=T,n[5]=D,n[6]=R,n[7]=0,n[8]=A,n[9]=z,n[10]=I,n[11]=0,n[12]=P,n[13]=N,n[14]=U,n[15]=1,n},k.multiplyByMatrix3=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("rotation",t),r.Check.typeOf.object("result",n);var a=e[0],i=e[1],o=e[2],s=e[4],u=e[5],c=e[6],l=e[8],f=e[9],d=e[10],h=t[0],p=t[1],y=t[2],m=t[3],C=t[4],w=t[5],v=t[6],O=t[7],b=t[8],g=a*h+s*p+l*y,x=i*h+u*p+f*y,E=o*h+c*p+d*y,k=a*m+s*C+l*w,q=i*m+u*C+f*w,j=o*m+c*C+d*w,_=a*v+s*O+l*b,S=i*v+u*O+f*b,M=o*v+c*O+d*b;return n[0]=g,n[1]=x,n[2]=E,n[3]=0,n[4]=k,n[5]=q,n[6]=j,n[7]=0,n[8]=_,n[9]=S,n[10]=M,n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},k.multiplyByTranslation=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("translation",t),r.Check.typeOf.object("result",n);var a=t.x,i=t.y,o=t.z,s=a*e[0]+i*e[4]+o*e[8]+e[12],u=a*e[1]+i*e[5]+o*e[9]+e[13],c=a*e[2]+i*e[6]+o*e[10]+e[14];return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=s,n[13]=u,n[14]=c,n[15]=e[15],n};var D=new a.Cartesian3;k.multiplyByUniformScale=function(e,t,n){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.number("scale",t),r.Check.typeOf.object("result",n),D.x=t,D.y=t,D.z=t,k.multiplyByScale(e,D,n)},k.multiplyByScale=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("scale",t),r.Check.typeOf.object("result",n);var a=t.x,i=t.y,o=t.z;return 1===a&&1===i&&1===o?k.clone(e,n):(n[0]=a*e[0],n[1]=a*e[1],n[2]=a*e[2],n[3]=0,n[4]=i*e[4],n[5]=i*e[5],n[6]=i*e[6],n[7]=0,n[8]=o*e[8],n[9]=o*e[9],n[10]=o*e[10],n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=1,n)},k.multiplyByVector=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("cartesian",t),r.Check.typeOf.object("result",n);var a=t.x,i=t.y,o=t.z,s=t.w,u=e[0]*a+e[4]*i+e[8]*o+e[12]*s,c=e[1]*a+e[5]*i+e[9]*o+e[13]*s,l=e[2]*a+e[6]*i+e[10]*o+e[14]*s,f=e[3]*a+e[7]*i+e[11]*o+e[15]*s;return n.x=u,n.y=c,n.z=l,n.w=f,n},k.multiplyByPointAsVector=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("cartesian",t),r.Check.typeOf.object("result",n);var a=t.x,i=t.y,o=t.z,s=e[0]*a+e[4]*i+e[8]*o,u=e[1]*a+e[5]*i+e[9]*o,c=e[2]*a+e[6]*i+e[10]*o;return n.x=s,n.y=u,n.z=c,n},k.multiplyByPoint=function(e,t,n){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("cartesian",t),r.Check.typeOf.object("result",n);var a=t.x,i=t.y,o=t.z,s=e[0]*a+e[4]*i+e[8]*o+e[12],u=e[1]*a+e[5]*i+e[9]*o+e[13],c=e[2]*a+e[6]*i+e[10]*o+e[14];return n.x=s,n.y=u,n.z=c,n},k.multiplyByScalar=function(e,t,n){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n},k.negate=function(e,t){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},k.transpose=function(e,t){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t);var n=e[1],a=e[2],i=e[3],o=e[6],s=e[7],u=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=a,t[9]=o,t[10]=e[10],t[11]=e[14],t[12]=i,t[13]=s,t[14]=u,t[15]=e[15],t},k.abs=function(e,t){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},k.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[3]===r[3]&&e[7]===r[7]&&e[11]===r[11]&&e[15]===r[15]},k.equalsEpsilon=function(e,n,a){return r.Check.typeOf.number("epsilon",a),e===n||t.defined(e)&&t.defined(n)&&Math.abs(e[0]-n[0])<=a&&Math.abs(e[1]-n[1])<=a&&Math.abs(e[2]-n[2])<=a&&Math.abs(e[3]-n[3])<=a&&Math.abs(e[4]-n[4])<=a&&Math.abs(e[5]-n[5])<=a&&Math.abs(e[6]-n[6])<=a&&Math.abs(e[7]-n[7])<=a&&Math.abs(e[8]-n[8])<=a&&Math.abs(e[9]-n[9])<=a&&Math.abs(e[10]-n[10])<=a&&Math.abs(e[11]-n[11])<=a&&Math.abs(e[12]-n[12])<=a&&Math.abs(e[13]-n[13])<=a&&Math.abs(e[14]-n[14])<=a&&Math.abs(e[15]-n[15])<=a},k.getTranslation=function(e,t){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t},k.getMatrix3=function(e,t){return r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var R=new l,A=new l,z=new O,I=new O(0,0,0,1);function P(e,r){this.center=a.Cartesian3.clone(t.defaultValue(e,a.Cartesian3.ZERO)),this.radius=t.defaultValue(r,0)}k.inverse=function(e,t){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t);var a=e[0],o=e[4],s=e[8],u=e[12],c=e[1],f=e[5],d=e[9],h=e[13],p=e[2],y=e[6],m=e[10],C=e[14],w=e[3],v=e[7],b=e[11],g=e[15],x=m*g,E=C*b,q=y*g,j=C*v,_=y*b,S=m*v,M=p*g,T=C*w,D=p*b,P=m*w,N=p*v,U=y*w,F=x*f+j*d+_*h-(E*f+q*d+S*h),V=E*c+M*d+P*h-(x*c+T*d+D*h),L=q*c+T*f+N*h-(j*c+M*f+U*h),B=S*c+D*f+U*d-(_*c+P*f+N*d),W=E*o+q*s+S*u-(x*o+j*s+_*u),Y=x*a+T*s+D*u-(E*a+M*s+P*u),Z=j*a+M*o+U*u-(q*a+T*o+N*u),H=_*a+P*o+N*s-(S*a+D*o+U*s),X=(x=s*h)*v+(j=u*f)*b+(_=o*d)*g-((E=u*d)*v+(q=o*h)*b+(S=s*f)*g),J=E*w+(M=a*h)*b+(P=s*c)*g-(x*w+(T=u*c)*b+(D=a*d)*g),G=q*w+T*v+(N=a*f)*g-(j*w+M*v+(U=o*c)*g),Q=S*w+D*v+U*b-(_*w+P*v+N*b),K=q*m+S*C+E*y-(_*C+x*y+j*m),$=D*C+x*p+T*m-(M*m+P*C+E*p),ee=M*y+U*C+j*p-(N*C+q*p+T*y),te=N*m+_*p+P*y-(D*y+U*m+S*p),re=a*F+o*V+s*L+u*B;if(Math.abs(re)<n.CesiumMath.EPSILON21){if(l.equalsEpsilon(k.getMatrix3(e,R),A,n.CesiumMath.EPSILON7)&&O.equals(k.getRow(e,3,z),I))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new i.RuntimeError("matrix is not invertible because its determinate is zero.")}return re=1/re,t[0]=F*re,t[1]=V*re,t[2]=L*re,t[3]=B*re,t[4]=W*re,t[5]=Y*re,t[6]=Z*re,t[7]=H*re,t[8]=X*re,t[9]=J*re,t[10]=G*re,t[11]=Q*re,t[12]=K*re,t[13]=$*re,t[14]=ee*re,t[15]=te*re,t},k.inverseTransformation=function(e,t){r.Check.typeOf.object("matrix",e),r.Check.typeOf.object("result",t);var n=e[0],a=e[1],i=e[2],o=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],d=e[12],h=e[13],p=e[14],y=-n*d-a*h-i*p,m=-o*d-s*h-u*p,C=-c*d-l*h-f*p;return t[0]=n,t[1]=o,t[2]=c,t[3]=0,t[4]=a,t[5]=s,t[6]=l,t[7]=0,t[8]=i,t[9]=u,t[10]=f,t[11]=0,t[12]=y,t[13]=m,t[14]=C,t[15]=1,t},k.IDENTITY=Object.freeze(new k(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),k.ZERO=Object.freeze(new k(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),k.COLUMN0ROW0=0,k.COLUMN0ROW1=1,k.COLUMN0ROW2=2,k.COLUMN0ROW3=3,k.COLUMN1ROW0=4,k.COLUMN1ROW1=5,k.COLUMN1ROW2=6,k.COLUMN1ROW3=7,k.COLUMN2ROW0=8,k.COLUMN2ROW1=9,k.COLUMN2ROW2=10,k.COLUMN2ROW3=11,k.COLUMN3ROW0=12,k.COLUMN3ROW1=13,k.COLUMN3ROW2=14,k.COLUMN3ROW3=15,Object.defineProperties(k.prototype,{length:{get:function(){return k.packedLength}}}),k.prototype.clone=function(e){return k.clone(this,e)},k.prototype.equals=function(e){return k.equals(this,e)},k.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},k.prototype.equalsEpsilon=function(e,t){return k.equalsEpsilon(this,e,t)},k.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"};var N=new a.Cartesian3,U=new a.Cartesian3,F=new a.Cartesian3,V=new a.Cartesian3,L=new a.Cartesian3,B=new a.Cartesian3,W=new a.Cartesian3,Y=new a.Cartesian3,Z=new a.Cartesian3,H=new a.Cartesian3,X=new a.Cartesian3,J=new a.Cartesian3,G=4/3*n.CesiumMath.PI;P.fromPoints=function(e,r){if(t.defined(r)||(r=new P),!t.defined(e)||0===e.length)return r.center=a.Cartesian3.clone(a.Cartesian3.ZERO,r.center),r.radius=0,r;var n,i=a.Cartesian3.clone(e[0],W),o=a.Cartesian3.clone(i,N),s=a.Cartesian3.clone(i,U),u=a.Cartesian3.clone(i,F),c=a.Cartesian3.clone(i,V),l=a.Cartesian3.clone(i,L),f=a.Cartesian3.clone(i,B),d=e.length;for(n=1;n<d;n++){a.Cartesian3.clone(e[n],i);var h=i.x,p=i.y,y=i.z;h<o.x&&a.Cartesian3.clone(i,o),h>c.x&&a.Cartesian3.clone(i,c),p<s.y&&a.Cartesian3.clone(i,s),p>l.y&&a.Cartesian3.clone(i,l),y<u.z&&a.Cartesian3.clone(i,u),y>f.z&&a.Cartesian3.clone(i,f)}var m=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(c,o,Y)),C=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(l,s,Y)),w=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(f,u,Y)),v=o,O=c,b=m;C>b&&(b=C,v=s,O=l),w>b&&(b=w,v=u,O=f);var g=Z;g.x=.5*(v.x+O.x),g.y=.5*(v.y+O.y),g.z=.5*(v.z+O.z);var x=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(O,g,Y)),E=Math.sqrt(x),k=H;k.x=o.x,k.y=s.y,k.z=u.z;var q=X;q.x=c.x,q.y=l.y,q.z=f.z;var j=a.Cartesian3.midpoint(k,q,J),_=0;for(n=0;n<d;n++){a.Cartesian3.clone(e[n],i);var S=a.Cartesian3.magnitude(a.Cartesian3.subtract(i,j,Y));S>_&&(_=S);var M=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(i,g,Y));if(M>x){var T=Math.sqrt(M);x=(E=.5*(E+T))*E;var D=T-E;g.x=(E*g.x+D*i.x)/T,g.y=(E*g.y+D*i.y)/T,g.z=(E*g.z+D*i.z)/T}}return E<_?(a.Cartesian3.clone(g,r.center),r.radius=E):(a.Cartesian3.clone(j,r.center),r.radius=_),r},P.fromInstancePoints=function(e,r,n){if(t.defined(r)||(r=new P),!t.defined(e)||0===n)return r.center=a.Cartesian3.clone(a.Cartesian3.ZERO,r.center),r.radius=0,r;var i,o=a.Cartesian3.clone(e[0],W),s=a.Cartesian3.clone(o,N),u=a.Cartesian3.clone(o,U),c=a.Cartesian3.clone(o,F),l=a.Cartesian3.clone(o,V),f=a.Cartesian3.clone(o,L),d=a.Cartesian3.clone(o,B);for(i=1;i<n;i++){a.Cartesian3.clone(e[i],o);var h=o.x,p=o.y,y=o.z;h<s.x&&a.Cartesian3.clone(o,s),h>l.x&&a.Cartesian3.clone(o,l),p<u.y&&a.Cartesian3.clone(o,u),p>f.y&&a.Cartesian3.clone(o,f),y<c.z&&a.Cartesian3.clone(o,c),y>d.z&&a.Cartesian3.clone(o,d)}var m=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(l,s,Y)),C=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(f,u,Y)),w=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(d,c,Y)),v=s,O=l,b=m;C>b&&(b=C,v=u,O=f),w>b&&(b=w,v=c,O=d);var g=Z;g.x=.5*(v.x+O.x),g.y=.5*(v.y+O.y),g.z=.5*(v.z+O.z);var x=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(O,g,Y)),E=Math.sqrt(x),k=H;k.x=s.x,k.y=u.y,k.z=c.z;var q=X;q.x=l.x,q.y=f.y,q.z=d.z;var j=a.Cartesian3.midpoint(k,q,J),_=0;for(i=0;i<n;i++){a.Cartesian3.clone(e[i],o);var S=a.Cartesian3.magnitude(a.Cartesian3.subtract(o,j,Y));S>_&&(_=S);var M=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(o,g,Y));if(M>x){var T=Math.sqrt(M);x=(E=.5*(E+T))*E;var D=T-E;g.x=(E*g.x+D*o.x)/T,g.y=(E*g.y+D*o.y)/T,g.z=(E*g.z+D*o.z)/T}}return E<_?(a.Cartesian3.clone(g,r.center),r.radius=E):(a.Cartesian3.clone(j,r.center),r.radius=_),r};var Q=new s,K=new a.Cartesian3,$=new a.Cartesian3,ee=new a.Cartographic,te=new a.Cartographic;P.fromRectangle2D=function(e,t,r){return P.fromRectangleWithHeights2D(e,t,0,0,r)},P.fromRectangleWithHeights2D=function(e,r,n,i,s){if(t.defined(s)||(s=new P),!t.defined(e))return s.center=a.Cartesian3.clone(a.Cartesian3.ZERO,s.center),s.radius=0,s;r=t.defaultValue(r,Q),o.Rectangle.southwest(e,ee),ee.height=n,o.Rectangle.northeast(e,te),te.height=i;var u=r.project(ee,K),c=r.project(te,$),l=c.x-u.x,f=c.y-u.y,d=c.z-u.z;s.radius=.5*Math.sqrt(l*l+f*f+d*d);var h=s.center;return h.x=u.x+.5*l,h.y=u.y+.5*f,h.z=u.z+.5*d,s};var re=[];P.fromRectangle3D=function(e,r,n,i){if(r=t.defaultValue(r,a.Ellipsoid.WGS84),n=t.defaultValue(n,0),t.defined(i)||(i=new P),!t.defined(e))return i.center=a.Cartesian3.clone(a.Cartesian3.ZERO,i.center),i.radius=0,i;var s=o.Rectangle.subsample(e,r,n,re);return P.fromPoints(s,i)},P.fromVertices=function(e,n,i,o){if(t.defined(o)||(o=new P),!t.defined(e)||0===e.length)return o.center=a.Cartesian3.clone(a.Cartesian3.ZERO,o.center),o.radius=0,o;n=t.defaultValue(n,a.Cartesian3.ZERO),i=t.defaultValue(i,3),r.Check.typeOf.number.greaterThanOrEquals("stride",i,3);var s=W;s.x=e[0]+n.x,s.y=e[1]+n.y,s.z=e[2]+n.z;var u,c=a.Cartesian3.clone(s,N),l=a.Cartesian3.clone(s,U),f=a.Cartesian3.clone(s,F),d=a.Cartesian3.clone(s,V),h=a.Cartesian3.clone(s,L),p=a.Cartesian3.clone(s,B),y=e.length;for(u=0;u<y;u+=i){var m=e[u]+n.x,C=e[u+1]+n.y,w=e[u+2]+n.z;s.x=m,s.y=C,s.z=w,m<c.x&&a.Cartesian3.clone(s,c),m>d.x&&a.Cartesian3.clone(s,d),C<l.y&&a.Cartesian3.clone(s,l),C>h.y&&a.Cartesian3.clone(s,h),w<f.z&&a.Cartesian3.clone(s,f),w>p.z&&a.Cartesian3.clone(s,p)}var v=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(d,c,Y)),O=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(h,l,Y)),b=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(p,f,Y)),g=c,x=d,E=v;O>E&&(E=O,g=l,x=h),b>E&&(E=b,g=f,x=p);var k=Z;k.x=.5*(g.x+x.x),k.y=.5*(g.y+x.y),k.z=.5*(g.z+x.z);var q=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(x,k,Y)),j=Math.sqrt(q),_=H;_.x=c.x,_.y=l.y,_.z=f.z;var S=X;S.x=d.x,S.y=h.y,S.z=p.z;var M=a.Cartesian3.midpoint(_,S,J),T=0;for(u=0;u<y;u+=i){s.x=e[u]+n.x,s.y=e[u+1]+n.y,s.z=e[u+2]+n.z;var D=a.Cartesian3.magnitude(a.Cartesian3.subtract(s,M,Y));D>T&&(T=D);var R=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(s,k,Y));if(R>q){var A=Math.sqrt(R);q=(j=.5*(j+A))*j;var z=A-j;k.x=(j*k.x+z*s.x)/A,k.y=(j*k.y+z*s.y)/A,k.z=(j*k.z+z*s.z)/A}}return j<T?(a.Cartesian3.clone(k,o.center),o.radius=j):(a.Cartesian3.clone(M,o.center),o.radius=T),o},P.fromEncodedCartesianVertices=function(e,r,n){if(t.defined(n)||(n=new P),!t.defined(e)||!t.defined(r)||e.length!==r.length||0===e.length)return n.center=a.Cartesian3.clone(a.Cartesian3.ZERO,n.center),n.radius=0,n;var i=W;i.x=e[0]+r[0],i.y=e[1]+r[1],i.z=e[2]+r[2];var o,s=a.Cartesian3.clone(i,N),u=a.Cartesian3.clone(i,U),c=a.Cartesian3.clone(i,F),l=a.Cartesian3.clone(i,V),f=a.Cartesian3.clone(i,L),d=a.Cartesian3.clone(i,B),h=e.length;for(o=0;o<h;o+=3){var p=e[o]+r[o],y=e[o+1]+r[o+1],m=e[o+2]+r[o+2];i.x=p,i.y=y,i.z=m,p<s.x&&a.Cartesian3.clone(i,s),p>l.x&&a.Cartesian3.clone(i,l),y<u.y&&a.Cartesian3.clone(i,u),y>f.y&&a.Cartesian3.clone(i,f),m<c.z&&a.Cartesian3.clone(i,c),m>d.z&&a.Cartesian3.clone(i,d)}var C=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(l,s,Y)),w=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(f,u,Y)),v=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(d,c,Y)),O=s,b=l,g=C;w>g&&(g=w,O=u,b=f),v>g&&(g=v,O=c,b=d);var x=Z;x.x=.5*(O.x+b.x),x.y=.5*(O.y+b.y),x.z=.5*(O.z+b.z);var E=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(b,x,Y)),k=Math.sqrt(E),q=H;q.x=s.x,q.y=u.y,q.z=c.z;var j=X;j.x=l.x,j.y=f.y,j.z=d.z;var _=a.Cartesian3.midpoint(q,j,J),S=0;for(o=0;o<h;o+=3){i.x=e[o]+r[o],i.y=e[o+1]+r[o+1],i.z=e[o+2]+r[o+2];var M=a.Cartesian3.magnitude(a.Cartesian3.subtract(i,_,Y));M>S&&(S=M);var T=a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(i,x,Y));if(T>E){var D=Math.sqrt(T);E=(k=.5*(k+D))*k;var R=D-k;x.x=(k*x.x+R*i.x)/D,x.y=(k*x.y+R*i.y)/D,x.z=(k*x.z+R*i.z)/D}}return k<S?(a.Cartesian3.clone(x,n.center),n.radius=k):(a.Cartesian3.clone(_,n.center),n.radius=S),n},P.fromCornerPoints=function(e,n,i){r.Check.typeOf.object("corner",e),r.Check.typeOf.object("oppositeCorner",n),t.defined(i)||(i=new P);var o=a.Cartesian3.midpoint(e,n,i.center);return i.radius=a.Cartesian3.distance(o,n),i},P.fromEllipsoid=function(e,n){return r.Check.typeOf.object("ellipsoid",e),t.defined(n)||(n=new P),a.Cartesian3.clone(a.Cartesian3.ZERO,n.center),n.radius=e.maximumRadius,n};var ne=new a.Cartesian3;P.fromBoundingSpheres=function(e,r){if(t.defined(r)||(r=new P),!t.defined(e)||0===e.length)return r.center=a.Cartesian3.clone(a.Cartesian3.ZERO,r.center),r.radius=0,r;var n=e.length;if(1===n)return P.clone(e[0],r);if(2===n)return P.union(e[0],e[1],r);var i,o=[];for(i=0;i<n;i++)o.push(e[i].center);var s=(r=P.fromPoints(o,r)).center,u=r.radius;for(i=0;i<n;i++){var c=e[i];u=Math.max(u,a.Cartesian3.distance(s,c.center,ne)+c.radius)}return r.radius=u,r};var ae=new a.Cartesian3,ie=new a.Cartesian3,oe=new a.Cartesian3;P.fromOrientedBoundingBox=function(e,n){r.Check.defined("orientedBoundingBox",e),t.defined(n)||(n=new P);var i=e.halfAxes,o=l.getColumn(i,0,ae),s=l.getColumn(i,1,ie),u=l.getColumn(i,2,oe);return a.Cartesian3.add(o,s,o),a.Cartesian3.add(o,u,o),n.center=a.Cartesian3.clone(e.center,n.center),n.radius=a.Cartesian3.magnitude(o),n},P.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.center=a.Cartesian3.clone(e.center,r.center),r.radius=e.radius,r):new P(e.center,e.radius)},P.packedLength=4,P.pack=function(e,n,a){r.Check.typeOf.object("value",e),r.Check.defined("array",n),a=t.defaultValue(a,0);var i=e.center;return n[a++]=i.x,n[a++]=i.y,n[a++]=i.z,n[a]=e.radius,n},P.unpack=function(e,n,a){r.Check.defined("array",e),n=t.defaultValue(n,0),t.defined(a)||(a=new P);var i=a.center;return i.x=e[n++],i.y=e[n++],i.z=e[n++],a.radius=e[n],a};var se=new a.Cartesian3,ue=new a.Cartesian3;P.union=function(e,n,i){r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",n),t.defined(i)||(i=new P);var o=e.center,s=e.radius,u=n.center,c=n.radius,l=a.Cartesian3.subtract(u,o,se),f=a.Cartesian3.magnitude(l);if(s>=f+c)return e.clone(i),i;if(c>=f+s)return n.clone(i),i;var d=.5*(s+f+c),h=a.Cartesian3.multiplyByScalar(l,(-s+d)/f,ue);return a.Cartesian3.add(h,o,h),a.Cartesian3.clone(h,i.center),i.radius=d,i};var ce=new a.Cartesian3;P.expand=function(e,t,n){r.Check.typeOf.object("sphere",e),r.Check.typeOf.object("point",t),n=P.clone(e,n);var i=a.Cartesian3.magnitude(a.Cartesian3.subtract(t,n.center,ce));return i>n.radius&&(n.radius=i),n},P.intersectPlane=function(e,t){r.Check.typeOf.object("sphere",e),r.Check.typeOf.object("plane",t);var n=e.center,i=e.radius,o=t.normal,s=a.Cartesian3.dot(o,n)+t.distance;return s<-i?u.OUTSIDE:s<i?u.INTERSECTING:u.INSIDE},P.transform=function(e,n,a){return r.Check.typeOf.object("sphere",e),r.Check.typeOf.object("transform",n),t.defined(a)||(a=new P),a.center=k.multiplyByPoint(n,e.center,a.center),a.radius=k.getMaximumScale(n)*e.radius,a};var le=new a.Cartesian3;P.distanceSquaredTo=function(e,t){r.Check.typeOf.object("sphere",e),r.Check.typeOf.object("cartesian",t);var n=a.Cartesian3.subtract(e.center,t,le);return a.Cartesian3.magnitudeSquared(n)-e.radius*e.radius},P.transformWithoutScale=function(e,n,a){return r.Check.typeOf.object("sphere",e),r.Check.typeOf.object("transform",n),t.defined(a)||(a=new P),a.center=k.multiplyByPoint(n,e.center,a.center),a.radius=e.radius,a};var fe=new a.Cartesian3;P.computePlaneDistances=function(e,n,i,o){r.Check.typeOf.object("sphere",e),r.Check.typeOf.object("position",n),r.Check.typeOf.object("direction",i),t.defined(o)||(o=new c);var s=a.Cartesian3.subtract(e.center,n,fe),u=a.Cartesian3.dot(i,s);return o.start=u-e.radius,o.stop=u+e.radius,o};for(var de=new a.Cartesian3,he=new a.Cartesian3,pe=new a.Cartesian3,ye=new a.Cartesian3,me=new a.Cartesian3,Ce=new a.Cartographic,we=new Array(8),ve=0;ve<8;++ve)we[ve]=new a.Cartesian3;var Oe,be=new s;P.projectTo2D=function(e,n,i){r.Check.typeOf.object("sphere",e);var o,s=(n=t.defaultValue(n,be)).ellipsoid,u=e.center,c=e.radius;o=a.Cartesian3.equals(u,a.Cartesian3.ZERO)?a.Cartesian3.clone(a.Cartesian3.UNIT_X,de):s.geodeticSurfaceNormal(u,de);var l=a.Cartesian3.cross(a.Cartesian3.UNIT_Z,o,he);a.Cartesian3.normalize(l,l);var f=a.Cartesian3.cross(o,l,pe);a.Cartesian3.normalize(f,f),a.Cartesian3.multiplyByScalar(o,c,o),a.Cartesian3.multiplyByScalar(f,c,f),a.Cartesian3.multiplyByScalar(l,c,l);var d=a.Cartesian3.negate(f,me),h=a.Cartesian3.negate(l,ye),p=we,y=p[0];a.Cartesian3.add(o,f,y),a.Cartesian3.add(y,l,y),y=p[1],a.Cartesian3.add(o,f,y),a.Cartesian3.add(y,h,y),y=p[2],a.Cartesian3.add(o,d,y),a.Cartesian3.add(y,h,y),y=p[3],a.Cartesian3.add(o,d,y),a.Cartesian3.add(y,l,y),a.Cartesian3.negate(o,o),y=p[4],a.Cartesian3.add(o,f,y),a.Cartesian3.add(y,l,y),y=p[5],a.Cartesian3.add(o,f,y),a.Cartesian3.add(y,h,y),y=p[6],a.Cartesian3.add(o,d,y),a.Cartesian3.add(y,h,y),y=p[7],a.Cartesian3.add(o,d,y),a.Cartesian3.add(y,l,y);for(var m=p.length,C=0;C<m;++C){var w=p[C];a.Cartesian3.add(u,w,w);var v=s.cartesianToCartographic(w,Ce);n.project(v,w)}var O=(u=(i=P.fromPoints(p,i)).center).x,b=u.y,g=u.z;return u.x=g,u.y=O,u.z=b,i},P.isOccluded=function(e,t){return r.Check.typeOf.object("sphere",e),r.Check.typeOf.object("occluder",t),!t.isBoundingSphereVisible(e)},P.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&a.Cartesian3.equals(e.center,r.center)&&e.radius===r.radius},P.prototype.intersectPlane=function(e){return P.intersectPlane(this,e)},P.prototype.distanceSquaredTo=function(e){return P.distanceSquaredTo(this,e)},P.prototype.computePlaneDistances=function(e,t,r){return P.computePlaneDistances(this,e,t,r)},P.prototype.isOccluded=function(e){return P.isOccluded(this,e)},P.prototype.equals=function(e){return P.equals(this,e)},P.prototype.clone=function(e){return P.clone(this,e)},P.prototype.volume=function(){var e=this.radius;return G*e*e*e};var ge,xe,Ee,ke,qe,je,_e,Se,Me,Te,De,Re,Ae,ze,Ie,Pe,Ne,Ue={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Fe={};function Ve(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function Le(){if(!t.defined(xe)&&(xe=!1,!Ze())){var e=/ Chrome\/([\.0-9]+)/.exec(ge.userAgent);null!==e&&(xe=!0,Ee=Ve(e[1]))}return xe}function Be(){if(!t.defined(ke)&&(ke=!1,!Le()&&!Ze()&&/ Safari\/[\.0-9]+/.test(ge.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(ge.userAgent);null!==e&&(ke=!0,qe=Ve(e[1]))}return ke}function We(){if(!t.defined(je)){je=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(ge.userAgent);null!==e&&(je=!0,(_e=Ve(e[1])).isNightly=!!e[2])}return je}function Ye(){var e;t.defined(Se)||(Se=!1,"Microsoft Internet Explorer"===ge.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(ge.userAgent))&&(Se=!0,Me=Ve(e[1])):"Netscape"===ge.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(ge.userAgent))&&(Se=!0,Me=Ve(e[1])));return Se}function Ze(){if(!t.defined(Te)){Te=!1;var e=/ Edge\/([\.0-9]+)/.exec(ge.userAgent);null!==e&&(Te=!0,De=Ve(e[1]))}return Te}function He(){if(!t.defined(Re)){Re=!1;var e=/Firefox\/([\.0-9]+)/.exec(ge.userAgent);null!==e&&(Re=!0,Ae=Ve(e[1]))}return Re}function Xe(){if(!t.defined(Ne)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var r=e.style.imageRendering;(Ne=t.defined(r)&&""!==r)&&(Pe=r)}return Ne}function Je(){if(!Je.initialized)throw new r.DeveloperError("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return Je._result}Object.defineProperties(Fe,{element:{get:function(){if(Fe.supportsFullscreen())return document[Ue.fullscreenElement]}},changeEventName:{get:function(){if(Fe.supportsFullscreen())return Ue.fullscreenchange}},errorEventName:{get:function(){if(Fe.supportsFullscreen())return Ue.fullscreenerror}},enabled:{get:function(){if(Fe.supportsFullscreen())return document[Ue.fullscreenEnabled]}},fullscreen:{get:function(){if(Fe.supportsFullscreen())return null!==Fe.element}}}),Fe.supportsFullscreen=function(){if(t.defined(Oe))return Oe;Oe=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return Ue.requestFullscreen="requestFullscreen",Ue.exitFullscreen="exitFullscreen",Ue.fullscreenEnabled="fullscreenEnabled",Ue.fullscreenElement="fullscreenElement",Ue.fullscreenchange="fullscreenchange",Ue.fullscreenerror="fullscreenerror",Oe=!0;for(var r,n=["webkit","moz","o","ms","khtml"],a=0,i=n.length;a<i;++a){var o=n[a];("function"==typeof e[r=o+"RequestFullscreen"]||"function"==typeof e[r=o+"RequestFullScreen"])&&(Ue.requestFullscreen=r,Oe=!0),r=o+"ExitFullscreen","function"==typeof document[r]?Ue.exitFullscreen=r:(r=o+"CancelFullScreen","function"==typeof document[r]&&(Ue.exitFullscreen=r)),r=o+"FullscreenEnabled",void 0!==document[r]?Ue.fullscreenEnabled=r:(r=o+"FullScreenEnabled",void 0!==document[r]&&(Ue.fullscreenEnabled=r)),r=o+"FullscreenElement",void 0!==document[r]?Ue.fullscreenElement=r:(r=o+"FullScreenElement",void 0!==document[r]&&(Ue.fullscreenElement=r)),r=o+"fullscreenchange",void 0!==document["on"+r]&&("ms"===o&&(r="MSFullscreenChange"),Ue.fullscreenchange=r),r=o+"fullscreenerror",void 0!==document["on"+r]&&("ms"===o&&(r="MSFullscreenError"),Ue.fullscreenerror=r)}return Oe},Fe.requestFullscreen=function(e,t){Fe.supportsFullscreen()&&e[Ue.requestFullscreen]({vrDisplay:t})},Fe.exitFullscreen=function(){Fe.supportsFullscreen()&&document[Ue.exitFullscreen]()},Fe._names=Ue,ge="undefined"!=typeof navigator?navigator:{},Je._promise=void 0,Je._result=void 0,Je.initialize=function(){if(t.defined(Je._promise))return Je._promise;var e=t.when.defer();if(Je._promise=e.promise,Ze())return Je._result=!1,e.resolve(Je._result),e.promise;var r=new Image;return r.onload=function(){Je._result=r.width>0&&r.height>0,e.resolve(Je._result)},r.onerror=function(){Je._result=!1,e.resolve(Je._result)},r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(Je,{initialized:{get:function(){return t.defined(Je._result)}}});var Ge=[];"undefined"!=typeof ArrayBuffer&&(Ge.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&Ge.push(Uint8ClampedArray),"undefined"!=typeof CanvasPixelArray&&Ge.push(CanvasPixelArray));var Qe={isChrome:Le,chromeVersion:function(){return Le()&&Ee},isSafari:Be,safariVersion:function(){return Be()&&qe},isWebkit:We,webkitVersion:function(){return We()&&_e},isInternetExplorer:Ye,internetExplorerVersion:function(){return Ye()&&Me},isEdge:Ze,edgeVersion:function(){return Ze()&&De},isFirefox:He,firefoxVersion:function(){return He()&&Ae},isWindows:function(){return t.defined(ze)||(ze=/Windows/i.test(ge.appVersion)),ze},hardwareConcurrency:t.defaultValue(ge.hardwareConcurrency,3),supportsPointerEvents:function(){return t.defined(Ie)||(Ie=!He()&&"undefined"!=typeof PointerEvent&&(!t.defined(ge.pointerEnabled)||ge.pointerEnabled)),Ie},supportsImageRenderingPixelated:Xe,supportsWebP:Je,imageRenderingValue:function(){return Xe()?Pe:void 0},typedArrayTypes:Ge};function Ke(e,r,n,a){this.x=t.defaultValue(e,0),this.y=t.defaultValue(r,0),this.z=t.defaultValue(n,0),this.w=t.defaultValue(a,0)}Qe.supportsFullscreen=function(){return Fe.supportsFullscreen()},Qe.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},Qe.supportsWebWorkers=function(){return"undefined"!=typeof Worker},Qe.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!Qe.isEdge()};var $e=new a.Cartesian3;Ke.fromAxisAngle=function(e,n,i){r.Check.typeOf.object("axis",e),r.Check.typeOf.number("angle",n);var o=n/2,s=Math.sin(o),u=($e=a.Cartesian3.normalize(e,$e)).x*s,c=$e.y*s,l=$e.z*s,f=Math.cos(o);return t.defined(i)?(i.x=u,i.y=c,i.z=l,i.w=f,i):new Ke(u,c,l,f)};var et=[1,2,0],tt=new Array(3);Ke.fromRotationMatrix=function(e,n){var a,i,o,s,u;r.Check.typeOf.object("matrix",e);var c=e[l.COLUMN0ROW0],f=e[l.COLUMN1ROW1],d=e[l.COLUMN2ROW2],h=c+f+d;if(h>0)u=.5*(a=Math.sqrt(h+1)),a=.5/a,i=(e[l.COLUMN1ROW2]-e[l.COLUMN2ROW1])*a,o=(e[l.COLUMN2ROW0]-e[l.COLUMN0ROW2])*a,s=(e[l.COLUMN0ROW1]-e[l.COLUMN1ROW0])*a;else{var p=0;f>c&&(p=1),d>c&&d>f&&(p=2);var y=et[p],m=et[y];a=Math.sqrt(e[l.getElementIndex(p,p)]-e[l.getElementIndex(y,y)]-e[l.getElementIndex(m,m)]+1);var C=tt;C[p]=.5*a,a=.5/a,u=(e[l.getElementIndex(m,y)]-e[l.getElementIndex(y,m)])*a,C[y]=(e[l.getElementIndex(y,p)]+e[l.getElementIndex(p,y)])*a,C[m]=(e[l.getElementIndex(m,p)]+e[l.getElementIndex(p,m)])*a,i=-C[0],o=-C[1],s=-C[2]}return t.defined(n)?(n.x=i,n.y=o,n.z=s,n.w=u,n):new Ke(i,o,s,u)};var rt=new Ke,nt=new Ke,at=new Ke,it=new Ke;Ke.fromHeadingPitchRoll=function(e,t){return r.Check.typeOf.object("headingPitchRoll",e),it=Ke.fromAxisAngle(a.Cartesian3.UNIT_X,e.roll,rt),at=Ke.fromAxisAngle(a.Cartesian3.UNIT_Y,-e.pitch,t),t=Ke.multiply(at,it,at),nt=Ke.fromAxisAngle(a.Cartesian3.UNIT_Z,-e.heading,rt),Ke.multiply(nt,t,t)};var ot=new a.Cartesian3,st=new a.Cartesian3,ut=new Ke,ct=new Ke,lt=new Ke;Ke.packedLength=4,Ke.pack=function(e,n,a){return r.Check.typeOf.object("value",e),r.Check.defined("array",n),a=t.defaultValue(a,0),n[a++]=e.x,n[a++]=e.y,n[a++]=e.z,n[a]=e.w,n},Ke.unpack=function(e,n,a){return r.Check.defined("array",e),n=t.defaultValue(n,0),t.defined(a)||(a=new Ke),a.x=e[n],a.y=e[n+1],a.z=e[n+2],a.w=e[n+3],a},Ke.packedInterpolationLength=3,Ke.convertPackedArrayForInterpolation=function(e,t,r,n){Ke.unpack(e,4*r,lt),Ke.conjugate(lt,lt);for(var a=0,i=r-t+1;a<i;a++){var o=3*a;Ke.unpack(e,4*(t+a),ut),Ke.multiply(ut,lt,ut),ut.w<0&&Ke.negate(ut,ut),Ke.computeAxis(ut,ot);var s=Ke.computeAngle(ut);n[o]=ot.x*s,n[o+1]=ot.y*s,n[o+2]=ot.z*s}},Ke.unpackInterpolationResult=function(e,r,n,i,o){t.defined(o)||(o=new Ke),a.Cartesian3.fromArray(e,0,st);var s=a.Cartesian3.magnitude(st);return Ke.unpack(r,4*i,ct),0===s?Ke.clone(Ke.IDENTITY,ut):Ke.fromAxisAngle(st,s,ut),Ke.multiply(ut,ct,o)},Ke.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.x=e.x,r.y=e.y,r.z=e.z,r.w=e.w,r):new Ke(e.x,e.y,e.z,e.w)},Ke.conjugate=function(e,t){return r.Check.typeOf.object("quaternion",e),r.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},Ke.magnitudeSquared=function(e){return r.Check.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},Ke.magnitude=function(e){return Math.sqrt(Ke.magnitudeSquared(e))},Ke.normalize=function(e,t){r.Check.typeOf.object("result",t);var n=1/Ke.magnitude(e),a=e.x*n,i=e.y*n,o=e.z*n,s=e.w*n;return t.x=a,t.y=i,t.z=o,t.w=s,t},Ke.inverse=function(e,t){r.Check.typeOf.object("result",t);var n=Ke.magnitudeSquared(e);return t=Ke.conjugate(e,t),Ke.multiplyByScalar(t,1/n,t)},Ke.add=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},Ke.subtract=function(e,t,n){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},Ke.negate=function(e,t){return r.Check.typeOf.object("quaternion",e),r.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},Ke.dot=function(e,t){return r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},Ke.multiply=function(e,t,n){r.Check.typeOf.object("left",e),r.Check.typeOf.object("right",t),r.Check.typeOf.object("result",n);var a=e.x,i=e.y,o=e.z,s=e.w,u=t.x,c=t.y,l=t.z,f=t.w,d=s*u+a*f+i*l-o*c,h=s*c-a*l+i*f+o*u,p=s*l+a*c-i*u+o*f,y=s*f-a*u-i*c-o*l;return n.x=d,n.y=h,n.z=p,n.w=y,n},Ke.multiplyByScalar=function(e,t,n){return r.Check.typeOf.object("quaternion",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},Ke.divideByScalar=function(e,t,n){return r.Check.typeOf.object("quaternion",e),r.Check.typeOf.number("scalar",t),r.Check.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},Ke.computeAxis=function(e,t){r.Check.typeOf.object("quaternion",e),r.Check.typeOf.object("result",t);var a=e.w;if(Math.abs(a-1)<n.CesiumMath.EPSILON6)return t.x=t.y=t.z=0,t;var i=1/Math.sqrt(1-a*a);return t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t},Ke.computeAngle=function(e){return r.Check.typeOf.object("quaternion",e),Math.abs(e.w-1)<n.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var ft=new Ke;Ke.lerp=function(e,t,n,a){return r.Check.typeOf.object("start",e),r.Check.typeOf.object("end",t),r.Check.typeOf.number("t",n),r.Check.typeOf.object("result",a),ft=Ke.multiplyByScalar(t,n,ft),a=Ke.multiplyByScalar(e,1-n,a),Ke.add(ft,a,a)};var dt=new Ke,ht=new Ke,pt=new Ke;Ke.slerp=function(e,t,a,i){r.Check.typeOf.object("start",e),r.Check.typeOf.object("end",t),r.Check.typeOf.number("t",a),r.Check.typeOf.object("result",i);var o=Ke.dot(e,t),s=t;if(o<0&&(o=-o,s=dt=Ke.negate(t,dt)),1-o<n.CesiumMath.EPSILON6)return Ke.lerp(e,s,a,i);var u=Math.acos(o);return ht=Ke.multiplyByScalar(e,Math.sin((1-a)*u),ht),pt=Ke.multiplyByScalar(s,Math.sin(a*u),pt),i=Ke.add(ht,pt,i),Ke.multiplyByScalar(i,1/Math.sin(u),i)},Ke.log=function(e,t){r.Check.typeOf.object("quaternion",e),r.Check.typeOf.object("result",t);var i=n.CesiumMath.acosClamped(e.w),o=0;return 0!==i&&(o=i/Math.sin(i)),a.Cartesian3.multiplyByScalar(e,o,t)},Ke.exp=function(e,t){r.Check.typeOf.object("cartesian",e),r.Check.typeOf.object("result",t);var n=a.Cartesian3.magnitude(e),i=0;return 0!==n&&(i=Math.sin(n)/n),t.x=e.x*i,t.y=e.y*i,t.z=e.z*i,t.w=Math.cos(n),t};var yt=new a.Cartesian3,mt=new a.Cartesian3,Ct=new Ke,wt=new Ke;Ke.computeInnerQuadrangle=function(e,t,n,i){r.Check.typeOf.object("q0",e),r.Check.typeOf.object("q1",t),r.Check.typeOf.object("q2",n),r.Check.typeOf.object("result",i);var o=Ke.conjugate(t,Ct);Ke.multiply(o,n,wt);var s=Ke.log(wt,yt);Ke.multiply(o,e,wt);var u=Ke.log(wt,mt);return a.Cartesian3.add(s,u,s),a.Cartesian3.multiplyByScalar(s,.25,s),a.Cartesian3.negate(s,s),Ke.exp(s,Ct),Ke.multiply(t,Ct,i)},Ke.squad=function(e,t,n,a,i,o){r.Check.typeOf.object("q0",e),r.Check.typeOf.object("q1",t),r.Check.typeOf.object("s0",n),r.Check.typeOf.object("s1",a),r.Check.typeOf.number("t",i),r.Check.typeOf.object("result",o);var s=Ke.slerp(e,t,i,Ct),u=Ke.slerp(n,a,i,wt);return Ke.slerp(s,u,2*i*(1-i),o)};for(var vt=new Ke,Ot=1.9011074535173003,bt=Qe.supportsTypedArrays()?new Float32Array(8):[],gt=Qe.supportsTypedArrays()?new Float32Array(8):[],xt=Qe.supportsTypedArrays()?new Float32Array(8):[],Et=Qe.supportsTypedArrays()?new Float32Array(8):[],kt=0;kt<7;++kt){var qt=kt+1,jt=2*qt+1;bt[kt]=1/(qt*jt),gt[kt]=qt/jt}function _t(e,t,n){r.Check.defined("array",e),r.Check.defined("itemToFind",t),r.Check.defined("comparator",n);for(var a,i,o=0,s=e.length-1;o<=s;)if((i=n(e[a=~~((o+s)/2)],t))<0)o=a+1;else{if(!(i>0))return a;s=a-1}return~(s+1)}function St(e,t,r,n,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=a}
/**
    @license
    sprintf.js from the php.js project - https://github.com/kvz/phpjs
    Directly from https://github.com/kvz/phpjs/blob/master/functions/strings/sprintf.js

    php.js is copyright 2012 Kevin van Zonneveld.

    Portions copyright Brett Zamir (http://brett-zamir.me), Kevin van Zonneveld
    (http://kevin.vanzonneveld.net), Onno Marsman, Theriault, Michael White
    (http://getsprink.com), Waldo Malqui Silva, Paulo Freitas, Jack, Jonas
    Raoni Soares Silva (http://www.jsfromhell.com), Philip Peterson, Legaev
    Andrey, Ates Goral (http://magnetiq.com), Alex, Ratheous, Martijn Wieringa,
    Rafa? Kukawski (http://blog.kukawski.pl), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/), Nate, Philippe Baumann,
    Enrique Gonzalez, Webtoolkit.info (http://www.webtoolkit.info/), Carlos R.
    L. Rodrigues (http://www.jsfromhell.com), Ash Searle
    (http://hexmen.com/blog/), Jani Hartikainen, travc, Ole Vrijenhoek,
    Erkekjetter, Michael Grier, Rafa? Kukawski (http://kukawski.pl), Johnny
    Mast (http://www.phpvrouwen.nl), T.Wild, d3x,
    http://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript,
    Rafa? Kukawski (http://blog.kukawski.pl/), stag019, pilus, WebDevHobo
    (http://webdevhobo.blogspot.com/), marrtins, GeekFG
    (http://geekfg.blogspot.com), Andrea Giammarchi
    (http://webreflection.blogspot.com), Arpad Ray (mailto:arpad@php.net),
    gorthaur, Paul Smith, Tim de Koning (http://www.kingsquare.nl), Joris, Oleg
    Eremeev, Steve Hilder, majak, gettimeofday, KELAN, Josh Fraser
    (http://onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/),
    Marc Palau, Martin
    (http://www.erlenwiese.de/), Breaking Par Consulting Inc
    (http://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256CFB006C45F7),
    Chris, Mirek Slugen, saulius, Alfonso Jimenez
    (http://www.alfonsojimenez.com), Diplom@t (http://difane.com/), felix,
    Mailfaker (http://www.weedem.fr/), Tyler Akins (http://rumkin.com), Caio
    Ariede (http://caioariede.com), Robin, Kankrelune
    (http://www.webfaktory.info/), Karol Kowalski, Imgen Tata
    (http://www.myipdf.com/), mdsjack (http://www.mdsjack.bo.it), Dreamer,
    Felix Geisendoerfer (http://www.debuggable.com/felix), Lars Fischer, AJ,
    David, Aman Gupta, Michael White, Public Domain
    (http://www.json.org/json2.js), Steven Levithan
    (http://blog.stevenlevithan.com), Sakimori, Pellentesque Malesuada,
    Thunder.m, Dj (http://phpjs.org/functions/htmlentities:425#comment_134018),
    Steve Clay, David James, Francois, class_exists, nobbler, T. Wild, Itsacon
    (http://www.itsacon.net/), date, Ole Vrijenhoek (http://www.nervous.nl/),
    Fox, Raphael (Ao RUDLER), Marco, noname, Mateusz "loonquawl" Zalega, Frank
    Forte, Arno, ger, mktime, john (http://www.jd-tech.net), Nick Kolosov
    (http://sammy.ru), marc andreu, Scott Cariss, Douglas Crockford
    (http://javascript.crockford.com), madipta, Slawomir Kaniecki,
    ReverseSyntax, Nathan, Alex Wilson, kenneth, Bayron Guevara, Adam Wallner
    (http://web2.bitbaro.hu/), paulo kuong, jmweb, Lincoln Ramsay, djmix,
    Pyerre, Jon Hohle, Thiago Mata (http://thiagomata.blog.com), lmeyrick
    (https://sourceforge.net/projects/bcmath-js/this.), Linuxworld, duncan,
    Gilbert, Sanjoy Roy, Shingo, sankai, Oskar Larsson H?gfeldt
    (http://oskar-lh.name/), Denny Wardhana, 0m3r, Everlasto, Subhasis Deb,
    josh, jd, Pier Paolo Ramon (http://www.mastersoup.com/), P, merabi, Soren
    Hansen, Eugene Bulkin (http://doubleaw.com/), Der Simon
    (http://innerdom.sourceforge.net/), echo is bad, Ozh, XoraX
    (http://www.xorax.info), EdorFaus, JB, J A R, Marc Jansen, Francesco, LH,
    Stoyan Kyosev (http://www.svest.org/), nord_ua, omid
    (http://phpjs.org/functions/380:380#comment_137122), Brad Touesnard, MeEtc
    (http://yass.meetcweb.com), Peter-Paul Koch
    (http://www.quirksmode.org/js/beat.html), Olivier Louvignes
    (http://mg-crea.com/), T0bsn, Tim Wiel, Bryan Elliott, Jalal Berrami,
    Martin, JT, David Randall, Thomas Beaucourt (http://www.webapp.fr), taith,
    vlado houba, Pierre-Luc Paour, Kristof Coomans (SCK-CEN Belgian Nucleair
    Research Centre), Martin Pool, Kirk Strobeck, Rick Waldron, Brant Messenger
    (http://www.brantmessenger.com/), Devan Penner-Woelk, Saulo Vallory, Wagner
    B. Soares, Artur Tchernychev, Valentina De Rosa, Jason Wong
    (http://carrot.org/), Christoph, Daniel Esteban, strftime, Mick@el, rezna,
    Simon Willison (http://simonwillison.net), Anton Ongson, Gabriel Paderni,
    Marco van Oort, penutbutterjelly, Philipp Lenssen, Bjorn Roesbeke
    (http://www.bjornroesbeke.be/), Bug?, Eric Nagel, Tomasz Wesolowski,
    Evertjan Garretsen, Bobby Drake, Blues (http://tech.bluesmoon.info/), Luke
    Godfrey, Pul, uestla, Alan C, Ulrich, Rafal Kukawski, Yves Sucaet,
    sowberry, Norman "zEh" Fuchs, hitwork, Zahlii, johnrembo, Nick Callen,
    Steven Levithan (stevenlevithan.com), ejsanders, Scott Baker, Brian Tafoya
    (http://www.premasolutions.com/), Philippe Jausions
    (http://pear.php.net/user/jausions), Aidan Lister
    (http://aidanlister.com/), Rob, e-mike, HKM, ChaosNo1, metjay, strcasecmp,
    strcmp, Taras Bogach, jpfle, Alexander Ermolaev
    (http://snippets.dzone.com/user/AlexanderErmolaev), DxGx, kilops, Orlando,
    dptr1988, Le Torbi, James (http://www.james-bell.co.uk/), Pedro Tainha
    (http://www.pedrotainha.com), James, Arnout Kazemier
    (http://www.3rd-Eden.com), Chris McMacken, gabriel paderni, Yannoo,
    FGFEmperor, baris ozdil, Tod Gentille, Greg Frazier, jakes, 3D-GRAF, Allan
    Jensen (http://www.winternet.no), Howard Yeend, Benjamin Lupton, davook,
    daniel airton wermann (http://wermann.com.br), Atli Tr, Maximusya, Ryan
    W Tenney (http://ryan.10e.us), Alexander M Beedie, fearphage
    (http://http/my.opera.com/fearphage/), Nathan Sepulveda, Victor, Matteo,
    Billy, stensi, Cord, Manish, T.J. Leahy, Riddler
    (http://www.frontierwebdev.com/), Rafa? Kukawski, FremyCompany, Matt
    Bradley, Tim de Koning, Luis Salazar (http://www.freaky-media.com/), Diogo
    Resende, Rival, Andrej Pavlovic, Garagoth, Le Torbi
    (http://www.letorbi.de/), Dino, Josep Sanz (http://www.ws3.es/), rem,
    Russell Walker (http://www.nbill.co.uk/), Jamie Beck
    (http://www.terabit.ca/), setcookie, Michael, YUI Library:
    http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html, Blues at
    http://hacks.bluesmoon.info/strftime/strftime.js, Ben
    (http://benblume.co.uk/), DtTvB
    (http://dt.in.th/2008-09-16.string-length-in-bytes.html), Andreas, William,
    meo, incidence, Cagri Ekin, Amirouche, Amir Habibi
    (http://www.residence-mixte.com/), Luke Smith (http://lucassmith.name),
    Kheang Hok Chin (http://www.distantia.ca/), Jay Klehr, Lorenzo Pisani,
    Tony, Yen-Wei Liu, Greenseed, mk.keck, Leslie Hoare, dude, booeyOH, Ben
    Bryan

    Licensed under the MIT (MIT-LICENSE.txt) license.

    Permission is hereby granted, free of charge, to any person obtaining a
    copy of this software and associated documentation files (the
    "Software"), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be included
    in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
    OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
    IN NO EVENT SHALL KEVIN VAN ZONNEVELD BE LIABLE FOR ANY CLAIM, DAMAGES
    OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
    ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.
    */function Mt(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,r=0,n=t[r++],a=function(e,t,r,n){r||(r=" ");var a=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+a:a+e},i=function(e,t,r,n,i,o){var s=n-e.length;return s>0&&(e=r||!i?a(e,n,o,r):e.slice(0,t.length)+a("",s,"0",!0)+e.slice(t.length)),e},o=function(e,t,r,n,o,s,u){var c=e>>>0;return e=(r=r&&c&&{2:"0b",8:"0",16:"0x"}[t]||"")+a(c.toString(t),s||0,"0",!1),i(e,r,n,o,u)},s=function(e,t,r,n,a,o){return null!=n&&(e=e.slice(0,n)),i(e,"",t,r,a,o)},u=function(e,n,u,c,l,f,d){var h,p,y,m,C;if("%%"==e)return"%";for(var w=!1,v="",O=!1,b=!1,g=" ",x=u.length,E=0;u&&E<x;E++)switch(u.charAt(E)){case" ":v=" ";break;case"+":v="+";break;case"-":w=!0;break;case"'":g=u.charAt(E+1);break;case"0":O=!0;break;case"#":b=!0}if((c=c?"*"==c?+t[r++]:"*"==c.charAt(0)?+t[c.slice(1,-1)]:+c:0)<0&&(c=-c,w=!0),!isFinite(c))throw new Error("sprintf: (minimum-)width must be finite");switch(f=f?"*"==f?+t[r++]:"*"==f.charAt(0)?+t[f.slice(1,-1)]:+f:"fFeE".indexOf(d)>-1?6:"d"==d?0:void 0,C=n?t[n.slice(0,-1)]:t[r++],d){case"s":return s(String(C),w,c,f,O,g);case"c":return s(String.fromCharCode(+C),w,c,f,O);case"b":return o(C,2,b,w,c,f,O);case"o":return o(C,8,b,w,c,f,O);case"x":return o(C,16,b,w,c,f,O);case"X":return o(C,16,b,w,c,f,O).toUpperCase();case"u":return o(C,10,b,w,c,f,O);case"i":case"d":return h=+C||0,C=(p=(h=Math.round(h-h%1))<0?"-":v)+a(String(Math.abs(h)),f,"0",!1),i(C,p,w,c,O);case"e":case"E":case"f":case"F":case"g":case"G":return p=(h=+C)<0?"-":v,y=["toExponential","toFixed","toPrecision"]["efg".indexOf(d.toLowerCase())],m=["toString","toUpperCase"]["eEfFgG".indexOf(d)%2],C=p+Math.abs(h)[y](f),i(C,p,w,c,O)[m]();default:return e}};return n.replace(e,u)}function Tt(e,t,r,n,a,i,o,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=a,this.second=i,this.millisecond=o,this.isLeapSecond=s}function Dt(e){if(null===e||isNaN(e))throw new r.DeveloperError("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0}function Rt(e,t){this.julianDate=e,this.offset=t}bt[7]=Ot/136,gt[7]=8*Ot/17,Ke.fastSlerp=function(e,t,n,a){r.Check.typeOf.object("start",e),r.Check.typeOf.object("end",t),r.Check.typeOf.number("t",n),r.Check.typeOf.object("result",a);var i,o=Ke.dot(e,t);o>=0?i=1:(i=-1,o=-o);for(var s=o-1,u=1-n,c=n*n,l=u*u,f=7;f>=0;--f)xt[f]=(bt[f]*c-gt[f])*s,Et[f]=(bt[f]*l-gt[f])*s;var d=i*n*(1+xt[0]*(1+xt[1]*(1+xt[2]*(1+xt[3]*(1+xt[4]*(1+xt[5]*(1+xt[6]*(1+xt[7])))))))),h=u*(1+Et[0]*(1+Et[1]*(1+Et[2]*(1+Et[3]*(1+Et[4]*(1+Et[5]*(1+Et[6]*(1+Et[7])))))))),p=Ke.multiplyByScalar(e,h,vt);return Ke.multiplyByScalar(t,d,a),Ke.add(p,a,a)},Ke.fastSquad=function(e,t,n,a,i,o){r.Check.typeOf.object("q0",e),r.Check.typeOf.object("q1",t),r.Check.typeOf.object("s0",n),r.Check.typeOf.object("s1",a),r.Check.typeOf.number("t",i),r.Check.typeOf.object("result",o);var s=Ke.fastSlerp(e,t,i,Ct),u=Ke.fastSlerp(n,a,i,wt);return Ke.fastSlerp(s,u,2*i*(1-i),o)},Ke.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.w===r.w},Ke.equalsEpsilon=function(e,n,a){return r.Check.typeOf.number("epsilon",a),e===n||t.defined(e)&&t.defined(n)&&Math.abs(e.x-n.x)<=a&&Math.abs(e.y-n.y)<=a&&Math.abs(e.z-n.z)<=a&&Math.abs(e.w-n.w)<=a},Ke.ZERO=Object.freeze(new Ke(0,0,0,0)),Ke.IDENTITY=Object.freeze(new Ke(0,0,0,1)),Ke.prototype.clone=function(e){return Ke.clone(this,e)},Ke.prototype.equals=function(e){return Ke.equals(this,e)},Ke.prototype.equalsEpsilon=function(e,t){return Ke.equalsEpsilon(this,e,t)},Ke.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var At=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),zt=Object.freeze({UTC:0,TAI:1}),It=new Tt,Pt=[31,28,31,30,31,30,31,31,30,31,30,31];function Nt(e,t){return er.compare(e.julianDate,t.julianDate)}var Ut=new Rt;function Ft(e){Ut.julianDate=e;var t=er.leapSeconds,r=_t(t,Ut,Nt);r<0&&(r=~r),r>=t.length&&(r=t.length-1);var n=t[r].offset;r>0&&(er.secondsDifference(t[r].julianDate,e)>n&&(n=t[--r].offset));er.addSeconds(e,n,e)}function Vt(e,t){Ut.julianDate=e;var r=er.leapSeconds,n=_t(r,Ut,Nt);if(n<0&&(n=~n),0===n)return er.addSeconds(e,-r[0].offset,t);if(n>=r.length)return er.addSeconds(e,-r[n-1].offset,t);var a=er.secondsDifference(r[n].julianDate,e);return 0===a?er.addSeconds(e,-r[n].offset,t):a<=1?void 0:er.addSeconds(e,-r[--n].offset,t)}function Lt(e,t,r){var n=t/At.SECONDS_PER_DAY|0;return e+=n,(t-=At.SECONDS_PER_DAY*n)<0&&(e--,t+=At.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function Bt(e,t,r,n,a,i,o){var s=(t-14)/12|0,u=e+4800+s,c=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);var l=i+(n*At.SECONDS_PER_HOUR+a*At.SECONDS_PER_MINUTE+o*At.SECONDS_PER_MILLISECOND);return l>=43200&&(c-=1),[c,l]}var Wt=/^(\d{4})$/,Yt=/^(\d{4})-(\d{2})$/,Zt=/^(\d{4})-?(\d{3})$/,Ht=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Xt=/^(\d{4})-?(\d{2})-?(\d{2})$/,Jt=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Gt=/^(\d{2})(\.\d+)?/.source+Jt.source,Qt=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Jt.source,Kt=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Jt.source,$t="Invalid ISO 8601 date.";function er(e,r,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=t.defaultValue(e,0),r=t.defaultValue(r,0),n=t.defaultValue(n,zt.UTC);var a=0|e;Lt(a,r+=(e-a)*At.SECONDS_PER_DAY,this),n===zt.UTC&&Ft(this)}er.fromGregorianDate=function(e,n){if(!(e instanceof Tt))throw new r.DeveloperError("date must be a valid GregorianDate.");var a=Bt(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return t.defined(n)?(Lt(a[0],a[1],n),Ft(n),n):new er(a[0],a[1],zt.UTC)},er.fromDate=function(e,n){if(!(e instanceof Date)||isNaN(e.getTime()))throw new r.DeveloperError("date must be a valid JavaScript Date.");var a=Bt(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return t.defined(n)?(Lt(a[0],a[1],n),Ft(n),n):new er(a[0],a[1],zt.UTC)},er.fromIso8601=function(e,n){if("string"!=typeof e)throw new r.DeveloperError($t);var a,i,o,s,u,c=(e=e.replace(",",".")).split("T"),l=1,f=1,d=0,h=0,p=0,y=0,m=c[0],C=c[1];if(!t.defined(m))throw new r.DeveloperError($t);if(null!==(c=m.match(Xt))){if((s=m.split("-").length-1)>0&&2!==s)throw new r.DeveloperError($t);a=+c[1],l=+c[2],f=+c[3]}else if(null!==(c=m.match(Yt)))a=+c[1],l=+c[2];else if(null!==(c=m.match(Wt)))a=+c[1];else{var w;if(null!==(c=m.match(Zt))){if(a=+c[1],w=+c[2],o=Dt(a),w<1||o&&w>366||!o&&w>365)throw new r.DeveloperError($t)}else{if(null===(c=m.match(Ht)))throw new r.DeveloperError($t);a=+c[1];var v=+c[2],O=+c[3]||0;if((s=m.split("-").length-1)>0&&(!t.defined(c[3])&&1!==s||t.defined(c[3])&&2!==s))throw new r.DeveloperError($t);w=7*v+O-new Date(Date.UTC(a,0,4)).getUTCDay()-3}(i=new Date(Date.UTC(a,0,1))).setUTCDate(w),l=i.getUTCMonth()+1,f=i.getUTCDate()}if(o=Dt(a),l<1||l>12||f<1||(2!==l||!o)&&f>Pt[l-1]||o&&2===l&&f>29)throw new r.DeveloperError($t);if(t.defined(C)){if(null!==(c=C.match(Kt))){if((s=C.split(":").length-1)>0&&2!==s&&3!==s)throw new r.DeveloperError($t);d=+c[1],h=+c[2],p=+c[3],y=1e3*+(c[4]||0),u=5}else if(null!==(c=C.match(Qt))){if((s=C.split(":").length-1)>2)throw new r.DeveloperError($t);d=+c[1],h=+c[2],p=60*+(c[3]||0),u=4}else{if(null===(c=C.match(Gt)))throw new r.DeveloperError($t);d=+c[1],h=60*+(c[2]||0),u=3}if(h>=60||p>=61||d>24||24===d&&(h>0||p>0||y>0))throw new r.DeveloperError($t);var b=c[u],g=+c[u+1],x=+(c[u+2]||0);switch(b){case"+":d-=g,h-=x;break;case"-":d+=g,h+=x;break;case"Z":break;default:h+=new Date(Date.UTC(a,l-1,f,d,h)).getTimezoneOffset()}}var E=60===p;for(E&&p--;h>=60;)h-=60,d++;for(;d>=24;)d-=24,f++;for(i=o&&2===l?29:Pt[l-1];f>i;)f-=i,++l>12&&(l-=12,a++),i=o&&2===l?29:Pt[l-1];for(;h<0;)h+=60,d--;for(;d<0;)d+=24,f--;for(;f<1;)--l<1&&(l+=12,a--),f+=i=o&&2===l?29:Pt[l-1];var k=Bt(a,l,f,d,h,p,y);return t.defined(n)?(Lt(k[0],k[1],n),Ft(n)):n=new er(k[0],k[1],zt.UTC),E&&er.addSeconds(n,1,n),n},er.now=function(e){return er.fromDate(new Date,e)};var tr=new er(0,0,zt.TAI);
/**
     * @license
     *
     * Grauw URI utilities
     *
     * See: http://hg.grauw.nl/grauw-lib/file/tip/src/uri.js
     *
     * @author Laurens Holst (http://www.grauw.nl/)
     *
     *   Copyright 2012 Laurens Holst
     *
     *   Licensed under the Apache License, Version 2.0 (the "License");
     *   you may not use this file except in compliance with the License.
     *   You may obtain a copy of the License at
     *
     *       http://www.apache.org/licenses/LICENSE-2.0
     *
     *   Unless required by applicable law or agreed to in writing, software
     *   distributed under the License is distributed on an "AS IS" BASIS,
     *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *   See the License for the specific language governing permissions and
     *   limitations under the License.
     *
     */
function rr(e){if(e instanceof rr)this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment;else if(e){var t=nr.exec(e);this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5]}}er.toGregorianDate=function(e,n){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");var a=!1,i=Vt(e,tr);t.defined(i)||(er.addSeconds(e,-1,tr),i=Vt(tr,tr),a=!0);var o=i.dayNumber,s=i.secondsOfDay;s>=43200&&(o+=1);var u=o+68569|0,c=4*u/146097|0,l=4e3*((u=u-((146097*c+3)/4|0)|0)+1)/1461001|0,f=80*(u=u-(1461*l/4|0)+31|0)/2447|0,d=u-(2447*f/80|0)|0,h=f+2-12*(u=f/11|0)|0,p=100*(c-49)+l+u|0,y=s/At.SECONDS_PER_HOUR|0,m=s-y*At.SECONDS_PER_HOUR,C=m/At.SECONDS_PER_MINUTE|0,w=0|(m-=C*At.SECONDS_PER_MINUTE),v=(m-w)/At.SECONDS_PER_MILLISECOND;return(y+=12)>23&&(y-=24),a&&(w+=1),t.defined(n)?(n.year=p,n.month=h,n.day=d,n.hour=y,n.minute=C,n.second=w,n.millisecond=v,n.isLeapSecond=a,n):new Tt(p,h,d,y,C,w,v,a)},er.toDate=function(e){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");var n=er.toGregorianDate(e,It),a=n.second;return n.isLeapSecond&&(a-=1),new Date(Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,a,n.millisecond))},er.toIso8601=function(e,n){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");var a=er.toGregorianDate(e,It),i=a.year,o=a.month,s=a.day,u=a.hour,c=a.minute,l=a.second,f=a.millisecond;return 1e4===i&&1===o&&1===s&&0===u&&0===c&&0===l&&0===f&&(i=9999,o=12,s=31,u=24),t.defined(n)||0===f?t.defined(n)&&0!==n?Mt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",i,o,s,u,c,l,(.01*f).toFixed(n).replace(".","").slice(0,n)):Mt("%04d-%02d-%02dT%02d:%02d:%02dZ",i,o,s,u,c,l):Mt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",i,o,s,u,c,l,(.01*f).toString().replace(".",""))},er.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.dayNumber=e.dayNumber,r.secondsOfDay=e.secondsOfDay,r):new er(e.dayNumber,e.secondsOfDay,zt.TAI)},er.compare=function(e,n){if(!t.defined(e))throw new r.DeveloperError("left is required.");if(!t.defined(n))throw new r.DeveloperError("right is required.");var a=e.dayNumber-n.dayNumber;return 0!==a?a:e.secondsOfDay-n.secondsOfDay},er.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.dayNumber===r.dayNumber&&e.secondsOfDay===r.secondsOfDay},er.equalsEpsilon=function(e,n,a){if(!t.defined(a))throw new r.DeveloperError("epsilon is required.");return e===n||t.defined(e)&&t.defined(n)&&Math.abs(er.secondsDifference(e,n))<=a},er.totalDays=function(e){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");return e.dayNumber+e.secondsOfDay/At.SECONDS_PER_DAY},er.secondsDifference=function(e,n){if(!t.defined(e))throw new r.DeveloperError("left is required.");if(!t.defined(n))throw new r.DeveloperError("right is required.");return(e.dayNumber-n.dayNumber)*At.SECONDS_PER_DAY+(e.secondsOfDay-n.secondsOfDay)},er.daysDifference=function(e,n){if(!t.defined(e))throw new r.DeveloperError("left is required.");if(!t.defined(n))throw new r.DeveloperError("right is required.");return e.dayNumber-n.dayNumber+(e.secondsOfDay-n.secondsOfDay)/At.SECONDS_PER_DAY},er.computeTaiMinusUtc=function(e){Ut.julianDate=e;var t=er.leapSeconds,r=_t(t,Ut,Nt);return r<0&&(r=~r,--r<0&&(r=0)),t[r].offset},er.addSeconds=function(e,n,a){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");if(!t.defined(n))throw new r.DeveloperError("seconds is required.");if(!t.defined(a))throw new r.DeveloperError("result is required.");return Lt(e.dayNumber,e.secondsOfDay+n,a)},er.addMinutes=function(e,n,a){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");if(!t.defined(n))throw new r.DeveloperError("minutes is required.");if(!t.defined(a))throw new r.DeveloperError("result is required.");var i=e.secondsOfDay+n*At.SECONDS_PER_MINUTE;return Lt(e.dayNumber,i,a)},er.addHours=function(e,n,a){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");if(!t.defined(n))throw new r.DeveloperError("hours is required.");if(!t.defined(a))throw new r.DeveloperError("result is required.");var i=e.secondsOfDay+n*At.SECONDS_PER_HOUR;return Lt(e.dayNumber,i,a)},er.addDays=function(e,n,a){if(!t.defined(e))throw new r.DeveloperError("julianDate is required.");if(!t.defined(n))throw new r.DeveloperError("days is required.");if(!t.defined(a))throw new r.DeveloperError("result is required.");return Lt(e.dayNumber+n,e.secondsOfDay,a)},er.lessThan=function(e,t){return er.compare(e,t)<0},er.lessThanOrEquals=function(e,t){return er.compare(e,t)<=0},er.greaterThan=function(e,t){return er.compare(e,t)>0},er.greaterThanOrEquals=function(e,t){return er.compare(e,t)>=0},er.prototype.clone=function(e){return er.clone(this,e)},er.prototype.equals=function(e){return er.equals(this,e)},er.prototype.equalsEpsilon=function(e,t){return er.equalsEpsilon(this,e,t)},er.prototype.toString=function(){return er.toIso8601(this)},er.leapSeconds=[new Rt(new er(2441317,43210,zt.TAI),10),new Rt(new er(2441499,43211,zt.TAI),11),new Rt(new er(2441683,43212,zt.TAI),12),new Rt(new er(2442048,43213,zt.TAI),13),new Rt(new er(2442413,43214,zt.TAI),14),new Rt(new er(2442778,43215,zt.TAI),15),new Rt(new er(2443144,43216,zt.TAI),16),new Rt(new er(2443509,43217,zt.TAI),17),new Rt(new er(2443874,43218,zt.TAI),18),new Rt(new er(2444239,43219,zt.TAI),19),new Rt(new er(2444786,43220,zt.TAI),20),new Rt(new er(2445151,43221,zt.TAI),21),new Rt(new er(2445516,43222,zt.TAI),22),new Rt(new er(2446247,43223,zt.TAI),23),new Rt(new er(2447161,43224,zt.TAI),24),new Rt(new er(2447892,43225,zt.TAI),25),new Rt(new er(2448257,43226,zt.TAI),26),new Rt(new er(2448804,43227,zt.TAI),27),new Rt(new er(2449169,43228,zt.TAI),28),new Rt(new er(2449534,43229,zt.TAI),29),new Rt(new er(2450083,43230,zt.TAI),30),new Rt(new er(2450630,43231,zt.TAI),31),new Rt(new er(2451179,43232,zt.TAI),32),new Rt(new er(2453736,43233,zt.TAI),33),new Rt(new er(2454832,43234,zt.TAI),34),new Rt(new er(2456109,43235,zt.TAI),35),new Rt(new er(2457204,43236,zt.TAI),36),new Rt(new er(2457754,43237,zt.TAI),37)],rr.prototype.scheme=null,rr.prototype.authority=null,rr.prototype.path="",rr.prototype.query=null,rr.prototype.fragment=null;var nr=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");rr.prototype.getScheme=function(){return this.scheme},rr.prototype.getAuthority=function(){return this.authority},rr.prototype.getPath=function(){return this.path},rr.prototype.getQuery=function(){return this.query},rr.prototype.getFragment=function(){return this.fragment},rr.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},rr.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},rr.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},rr.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(or,ur).replace(ar,sr)),this.path&&(this.path=this.path.replace(ar,sr)),this.query&&(this.query=this.query.replace(ar,sr)),this.fragment&&(this.fragment=this.fragment.replace(ar,sr))};var ar=/%[0-9a-z]{2}/gi,ir=/[a-zA-Z0-9\-\._~]/,or=/(.*@)?([^@:]*)(:.*)?/;function sr(e){var t=unescape(e);return ir.test(t)?t:e.toUpperCase()}function ur(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function cr(e,r){if(null===e||"object"!=typeof e)return e;r=t.defaultValue(r,!1);var n=new e.constructor;for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];r&&(i=cr(i,r)),n[a]=i}return n}function lr(e,r,n){n=t.defaultValue(n,!1);var a,i,o,s={},u=t.defined(e),c=t.defined(r);if(u)for(a in e)e.hasOwnProperty(a)&&(i=e[a],c&&n&&"object"==typeof i&&r.hasOwnProperty(a)?(o=r[a],s[a]="object"==typeof o?lr(i,o,n):i):s[a]=i);if(c)for(a in r)r.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(o=r[a],s[a]=o);return s}function fr(e,t){var r;return"undefined"!=typeof document&&(r=document),fr._implementation(e,t,r)}rr.prototype.resolve=function(e){var t=new rr;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?(t.path=this.path,t.removeDotSegments()):(e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments()),t.query=this.query))),t.fragment=this.fragment,t},rr.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];n&&t.shift();for(""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},rr.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},fr._implementation=function(e,n,a){if(!t.defined(e))throw new r.DeveloperError("relative uri is required.");if(!t.defined(n)){if(void 0===a)return e;n=t.defaultValue(a.baseURI,a.location.href)}var i=new rr(n);return new rr(e).resolve(i).toString()};var dr,hr=/^blob:/i;function pr(e){return r.Check.typeOf.string("uri",e),hr.test(e)}var yr=/^data:/i;function mr(e){return r.Check.typeOf.string("uri",e),yr.test(e)}var Cr=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),wr=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function vr(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var r=t.defaultValue(e.throttleByServer,!1),n=t.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=t.defaultValue(e.priority,0),this.throttle=n,this.throttleByServer=r,this.type=t.defaultValue(e.type,wr.OTHER),this.serverKey=void 0,this.state=Cr.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Or(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var a=r[n],i=a.indexOf(": ");if(i>0){var o=a.substring(0,i),s=a.substring(i+2);t[o]=s}}return t}(this.responseHeaders))}function br(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function gr(e,t){return t-e}function xr(e){r.Check.typeOf.object("options",e),r.Check.defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Er(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}vr.prototype.cancel=function(){this.cancelled=!0},vr.prototype.clone=function(e){return t.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new vr(this)},Or.prototype.toString=function(){var e="Request has failed.";return t.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},Object.defineProperties(br.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),br.prototype.addEventListener=function(e,t){r.Check.typeOf.func("listener",e),this._listeners.push(e),this._scopes.push(t);var n=this;return function(){n.removeEventListener(e,t)}},br.prototype.removeEventListener=function(e,t){r.Check.typeOf.func("listener",e);for(var n=this._listeners,a=this._scopes,i=-1,o=0;o<n.length;o++)if(n[o]===e&&a[o]===t){i=o;break}return-1!==i&&(this._insideRaiseEvent?(this._toRemove.push(i),n[i]=void 0,a[i]=void 0):(n.splice(i,1),a.splice(i,1)),!0)},br.prototype.raiseEvent=function(){var e;this._insideRaiseEvent=!0;var r=this._listeners,n=this._scopes,a=r.length;for(e=0;e<a;e++){var i=r[e];t.defined(i)&&r[e].apply(n[e],arguments)}var o=this._toRemove;if((a=o.length)>0){for(o.sort(gr),e=0;e<a;e++){var s=o[e];r.splice(s,1),n.splice(s,1)}o.length=0}this._insideRaiseEvent=!1},Object.defineProperties(xr.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){this._maximumLength=e,this._length>e&&e>0&&(this._length=e,this._array.length=e)}},comparator:{get:function(){return this._comparator}}}),xr.prototype.reserve=function(e){e=t.defaultValue(e,this._length),this._array.length=e},xr.prototype.heapify=function(e){e=t.defaultValue(e,0);for(var r=this._length,n=this._comparator,a=this._array,i=-1,o=!0;o;){var s=2*(e+1),u=s-1;i=u<r&&n(a[u],a[e])<0?u:e,s<r&&n(a[s],a[i])<0&&(i=s),i!==e?(Er(a,i,e),e=i):o=!1}},xr.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},xr.prototype.insert=function(e){r.Check.defined("element",e);var n,a=this._array,i=this._comparator,o=this._maximumLength,s=this._length++;for(s<a.length?a[s]=e:a.push(e);0!==s;){var u=Math.floor((s-1)/2);if(!(i(a[s],a[u])<0))break;Er(a,s,u),s=u}return t.defined(o)&&this._length>o&&(n=a[o],this._length=o),n},xr.prototype.pop=function(e){if(e=t.defaultValue(e,0),0!==this._length){r.Check.typeOf.number.lessThan("index",e,this._length);var n=this._array,a=n[e];return Er(n,e,--this._length),this.heapify(e),a}};var kr={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},qr=20,jr=new xr({comparator:function(e,t){return e.priority-t.priority}});jr.maximumLength=qr,jr.reserve(qr);var _r=[],Sr={},Mr="undefined"!=typeof document?new rr(document.location.href):new rr,Tr=new br;function Dr(){}function Rr(e){t.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function Ar(e){var r=t.defaultValue(Dr.requestsByServer[e],Dr.maximumRequestsPerServer);return Sr[e]<r}function zr(e){return e.state===Cr.UNISSUED&&(e.state=Cr.ISSUED,e.deferred=t.when.defer()),e.deferred.promise}function Ir(e){var t=zr(e);return e.state=Cr.ACTIVE,_r.push(e),++kr.numberOfActiveRequests,++kr.numberOfActiveRequestsEver,++Sr[e.serverKey],e.requestFunction().then(function(e){return function(t){e.state!==Cr.CANCELLED&&(--kr.numberOfActiveRequests,--Sr[e.serverKey],Tr.raiseEvent(),e.state=Cr.RECEIVED,e.deferred.resolve(t))}}(e)).otherwise(function(e){return function(t){e.state!==Cr.CANCELLED&&(++kr.numberOfFailedRequests,--kr.numberOfActiveRequests,--Sr[e.serverKey],Tr.raiseEvent(t),e.state=Cr.FAILED,e.deferred.reject(t))}}(e)),t}function Pr(e){var r=e.state===Cr.ACTIVE;e.state=Cr.CANCELLED,++kr.numberOfCancelledRequests,e.deferred.reject(),r&&(--kr.numberOfActiveRequests,--Sr[e.serverKey],++kr.numberOfCancelledActiveRequests),t.defined(e.cancelFunction)&&e.cancelFunction()}Dr.maximumRequests=50,Dr.maximumRequestsPerServer=6,Dr.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},Dr.throttleRequests=!0,Dr.debugShowStatistics=!1,Dr.requestCompletedEvent=Tr,Object.defineProperties(Dr,{statistics:{get:function(){return kr}},priorityHeapLength:{get:function(){return qr},set:function(e){if(e<qr)for(;jr.length>e;){Pr(jr.pop())}qr=e,jr.maximumLength=e,jr.reserve(e)}}}),Dr.update=function(){var e,t,r=0,n=_r.length;for(e=0;e<n;++e)(t=_r[e]).cancelled&&Pr(t),t.state===Cr.ACTIVE?r>0&&(_r[e-r]=t):++r;_r.length-=r;var a=jr.internalArray,i=jr.length;for(e=0;e<i;++e)Rr(a[e]);jr.resort();for(var o=Math.max(Dr.maximumRequests-_r.length,0),s=0;s<o&&jr.length>0;)(t=jr.pop()).cancelled?Pr(t):!t.throttleByServer||Ar(t.serverKey)?(Ir(t),++s):Pr(t);!function(){if(!Dr.debugShowStatistics)return;0===kr.numberOfActiveRequests&&kr.lastNumberOfActiveRequests>0&&(kr.numberOfAttemptedRequests>0&&(console.log("Number of attempted requests: "+kr.numberOfAttemptedRequests),kr.numberOfAttemptedRequests=0),kr.numberOfCancelledRequests>0&&(console.log("Number of cancelled requests: "+kr.numberOfCancelledRequests),kr.numberOfCancelledRequests=0),kr.numberOfCancelledActiveRequests>0&&(console.log("Number of cancelled active requests: "+kr.numberOfCancelledActiveRequests),kr.numberOfCancelledActiveRequests=0),kr.numberOfFailedRequests>0&&(console.log("Number of failed requests: "+kr.numberOfFailedRequests),kr.numberOfFailedRequests=0));kr.lastNumberOfActiveRequests=kr.numberOfActiveRequests}()},Dr.getServerKey=function(e){r.Check.typeOf.string("url",e);var n=new rr(e).resolve(Mr);n.normalize();var a=n.authority;/:/.test(a)||(a=a+":"+("https"===n.scheme?"443":"80"));var i=Sr[a];return t.defined(i)||(Sr[a]=0),a},Dr.request=function(e){if(r.Check.typeOf.object("request",e),r.Check.typeOf.string("request.url",e.url),r.Check.typeOf.func("request.requestFunction",e.requestFunction),mr(e.url)||pr(e.url))return Tr.raiseEvent(),e.state=Cr.RECEIVED,e.requestFunction();if(++kr.numberOfAttemptedRequests,t.defined(e.serverKey)||(e.serverKey=Dr.getServerKey(e.url)),!Dr.throttleRequests||!e.throttleByServer||Ar(e.serverKey)){if(!Dr.throttleRequests||!e.throttle)return Ir(e);if(!(_r.length>=Dr.maximumRequests)){Rr(e);var n=jr.insert(e);if(t.defined(n)){if(n===e)return;Pr(n)}return zr(e)}}},Dr.clearForSpecs=function(){for(;jr.length>0;){Pr(jr.pop())}for(var e=_r.length,t=0;t<e;++t)Pr(_r[t]);_r.length=0,Sr={},kr.numberOfAttemptedRequests=0,kr.numberOfActiveRequests=0,kr.numberOfCancelledRequests=0,kr.numberOfCancelledActiveRequests=0,kr.numberOfFailedRequests=0,kr.numberOfActiveRequestsEver=0,kr.lastNumberOfActiveRequests=0},Dr.numberOfActiveRequestsByServer=function(e){return Sr[e]},Dr.requestHeap=jr;var Nr={},Ur={};Nr.add=function(e,n){if(!t.defined(e))throw new r.DeveloperError("host is required.");if(!t.defined(n)||n<=0)throw new r.DeveloperError("port is required to be greater than 0.");var a=e.toLowerCase()+":"+n;t.defined(Ur[a])||(Ur[a]=!0)},Nr.remove=function(e,n){if(!t.defined(e))throw new r.DeveloperError("host is required.");if(!t.defined(n)||n<=0)throw new r.DeveloperError("port is required to be greater than 0.");var a=e.toLowerCase()+":"+n;t.defined(Ur[a])&&delete Ur[a]},Nr.contains=function(e){if(!t.defined(e))throw new r.DeveloperError("url is required.");var n=function(e){var r=new rr(e);r.normalize();var n=r.getAuthority();if(t.defined(n)){if(-1!==n.indexOf("@")){var a=n.split("@");n=a[1]}if(-1===n.indexOf(":")){var i=r.getScheme();if(t.defined(i)||(i=(i=window.location.protocol).substring(0,i.length-1)),"http"===i)n+=":80";else{if("https"!==i)return;n+=":443"}}return n}}(e);return!(!t.defined(n)||!t.defined(Ur[n]))},Nr.clear=function(){Ur={}};var Fr,Vr=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}}();function Lr(e,n,a,i){var o,s=e.query;if(!t.defined(s)||0===s.length)return{};if(-1===s.indexOf("=")){var u={};u[s]=void 0,o=u}else o=function(e){if(!t.defined(e))throw new r.DeveloperError("queryString is required.");var n={};if(""===e)return n;for(var a=e.replace(/\+/g,"%20").split(/[&;]/),i=0,o=a.length;i<o;++i){var s=a[i].split("="),u=decodeURIComponent(s[0]),c=s[1];c=t.defined(c)?decodeURIComponent(c):"";var l=n[u];"string"==typeof l?n[u]=[l,c]:Array.isArray(l)?l.push(c):n[u]=c}return n}(s);n._queryParameters=a?Zr(o,n._queryParameters,i):o,e.query=void 0}function Br(e,n){var a=n._queryParameters,i=Object.keys(a);1!==i.length||t.defined(a[i[0]])?e.query=function(e){if(!t.defined(e))throw new r.DeveloperError("obj is required.");var n="";for(var a in e)if(e.hasOwnProperty(a)){var i=e[a],o=encodeURIComponent(a)+"=";if(Array.isArray(i))for(var s=0,u=i.length;s<u;++s)n+=o+encodeURIComponent(i[s])+"&";else n+=o+encodeURIComponent(i)+"&"}return n=n.slice(0,-1)}(a):e.query=i[0]}function Wr(e,r){return t.defined(e)?t.defined(e.clone)?e.clone():cr(e):r}function Yr(e){if(e.state===Cr.ISSUED||e.state===Cr.ACTIVE)throw new i.RuntimeError("The Resource is already being fetched.");e.state=Cr.UNISSUED,e.deferred=void 0}function Zr(e,r,n){if(!n)return lr(e,r);var a=cr(e,!0);for(var i in r)if(r.hasOwnProperty(i)){var o=a[i],s=r[i];t.defined(o)?(Array.isArray(o)||(o=a[i]=[o]),a[i]=o.concat(s)):a[i]=Array.isArray(s)?s.slice():s}return a}function Hr(e){"string"==typeof(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT))&&(e={url:e}),r.Check.typeOf.string("options.url",e.url),this._url=void 0,this._templateValues=Wr(e.templateValues,{}),this._queryParameters=Wr(e.queryParameters,{}),this.headers=Wr(e.headers,{}),this.request=t.defaultValue(e.request,new vr),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=t.defaultValue(e.retryAttempts,0),this._retryCount=0;var n=new rr(e.url);Lr(n,this,!0,!0),n.fragment=void 0,this._url=n.toString()}function Xr(e){var r=e.resource,n=e.flipY,a=e.preferImageBitmap,i=r.request;i.url=r.url,i.requestFunction=function(){var e=!1;r.isDataUri||r.isBlobUri||(e=r.isCrossOriginUrl);var o=t.when.defer();return Hr._Implementations.createImage(i,e,o,n,a),o.promise};var o=Dr.request(i);if(t.defined(o))return o.otherwise((function(e){return i.state!==Cr.FAILED?t.when.reject(e):r.retryOnError(e).then((function(o){return o?(i.state=Cr.UNISSUED,i.deferred=void 0,Xr({resource:r,flipY:n,preferImageBitmap:a})):t.when.reject(e)}))}))}Hr.createIfNeeded=function(e){return e instanceof Hr?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new Hr({url:e})},Hr.supportsImageBitmapOptions=function(){if(t.defined(Fr))return Fr;if("function"!=typeof createImageBitmap)return Fr=t.when.resolve(!1);return Fr=Hr.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then((function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})})).then((function(e){return!0})).otherwise((function(){return!1}))},Object.defineProperties(Hr,{isBlobSupported:{get:function(){return Vr}}}),Object.defineProperties(Hr.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){var t=new rr(e);Lr(t,this,!1),t.fragment=void 0,this._url=t.toString()}},extension:{get:function(){return function(e){if(!t.defined(e))throw new r.DeveloperError("uri is required.");var n=new rr(e);n.normalize();var a=n.path,i=a.lastIndexOf("/");return-1!==i&&(a=a.substr(i+1)),i=a.lastIndexOf("."),a=-1===i?"":a.substr(i+1)}(this._url)}},isDataUri:{get:function(){return mr(this._url)}},isBlobUri:{get:function(){return pr(this._url)}},isCrossOriginUrl:{get:function(){return function(e){t.defined(dr)||(dr=document.createElement("a")),dr.href=window.location.href;var r=dr.host,n=dr.protocol;return dr.href=e,dr.href=dr.href,n!==dr.protocol||r!==dr.host}(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}}}),Hr.prototype.getUrlComponent=function(e,r){if(this.isDataUri)return this._url;var n=new rr(this._url);e&&Br(n,this);var a=n.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),i=this._templateValues;return a=a.replace(/{(.*?)}/g,(function(e,r){var n=i[r];return t.defined(n)?encodeURIComponent(n):e})),r&&t.defined(this.proxy)&&(a=this.proxy.getURL(a)),a},Hr.prototype.setQueryParameters=function(e,t){this._queryParameters=t?Zr(this._queryParameters,e,!1):Zr(e,this._queryParameters,!1)},Hr.prototype.appendQueryParameters=function(e){this._queryParameters=Zr(e,this._queryParameters,!0)},Hr.prototype.setTemplateValues=function(e,t){this._templateValues=t?lr(this._templateValues,e):lr(e,this._templateValues)},Hr.prototype.getDerivedResource=function(e){var r=this.clone();if(r._retryCount=0,t.defined(e.url)){var n=new rr(e.url);Lr(n,r,!0,t.defaultValue(e.preserveQueryParameters,!1)),n.fragment=void 0,r._url=n.resolve(new rr(fr(this._url))).toString()}return t.defined(e.queryParameters)&&(r._queryParameters=lr(e.queryParameters,r._queryParameters)),t.defined(e.templateValues)&&(r._templateValues=lr(e.templateValues,r.templateValues)),t.defined(e.headers)&&(r.headers=lr(e.headers,r.headers)),t.defined(e.proxy)&&(r.proxy=e.proxy),t.defined(e.request)&&(r.request=e.request),t.defined(e.retryCallback)&&(r.retryCallback=e.retryCallback),t.defined(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},Hr.prototype.retryOnError=function(e){var r=this.retryCallback;if("function"!=typeof r||this._retryCount>=this.retryAttempts)return t.when(!1);var n=this;return t.when(r(this,e)).then((function(e){return++n._retryCount,e}))},Hr.prototype.clone=function(e){return t.defined(e)||(e=new Hr({url:this._url})),e._url=this._url,e._queryParameters=cr(this._queryParameters),e._templateValues=cr(this._templateValues),e.headers=cr(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},Hr.prototype.getBaseUri=function(e){return function(e,n){if(!t.defined(e))throw new r.DeveloperError("uri is required.");var a="",i=e.lastIndexOf("/");return-1!==i&&(a=e.substring(0,i+1)),n?(e=new rr(e),t.defined(e.query)&&(a+="?"+e.query),t.defined(e.fragment)&&(a+="#"+e.fragment),a):a}(this.getUrlComponent(e),e)},Hr.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},Hr.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},Hr.fetchArrayBuffer=function(e){return new Hr(e).fetchArrayBuffer()},Hr.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},Hr.fetchBlob=function(e){return new Hr(e).fetchBlob()},Hr.prototype.fetchImage=function(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT);var r=t.defaultValue(e.preferImageBitmap,!1),n=t.defaultValue(e.preferBlob,!1),a=t.defaultValue(e.flipY,!1);if(Yr(this.request),!Vr||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return Xr({resource:this,flipY:a,preferImageBitmap:r});var i,o,s,u=this.fetchBlob();return t.defined(u)?Hr.supportsImageBitmapOptions().then((function(e){return i=e&&r,u})).then((function(e){if(t.defined(e)){if(s=e,i)return Hr.createImageBitmapFromBlob(e,{flipY:a,premultiplyAlpha:!1});var r=window.URL.createObjectURL(e);return Xr({resource:o=new Hr({url:r}),flipY:a,preferImageBitmap:!1})}})).then((function(e){if(t.defined(e))return e.blob=s,i||window.URL.revokeObjectURL(o.url),e})).otherwise((function(e){return t.defined(o)&&window.URL.revokeObjectURL(o.url),e.blob=s,t.when.reject(e)})):void 0},Hr.fetchImage=function(e){return new Hr(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},Hr.prototype.fetchText=function(){return this.fetch({responseType:"text"})},Hr.fetchText=function(e){return new Hr(e).fetchText()},Hr.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(t.defined(e))return e.then((function(e){if(t.defined(e))return JSON.parse(e)}))},Hr.fetchJson=function(e){return new Hr(e).fetchJson()},Hr.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},Hr.fetchXML=function(e){return new Hr(e).fetchXML()},Hr.prototype.fetchJsonp=function(e){var r;e=t.defaultValue(e,"callback"),Yr(this.request);do{r="loadJsonp"+Math.random().toString().substring(2,8)}while(t.defined(window[r]));return function e(r,n,a){var i={};i[n]=a,r.setQueryParameters(i);var o=r.request;o.url=r.url,o.requestFunction=function(){var e=t.when.defer();return window[a]=function(t){e.resolve(t);try{delete window[a]}catch(e){window[a]=void 0}},Hr._Implementations.loadAndExecuteScript(r.url,a,e),e.promise};var s=Dr.request(o);if(!t.defined(s))return;return s.otherwise((function(i){return o.state!==Cr.FAILED?t.when.reject(i):r.retryOnError(i).then((function(s){return s?(o.state=Cr.UNISSUED,o.deferred=void 0,e(r,n,a)):t.when.reject(i)}))}))}(this,e,r)},Hr.fetchJsonp=function(e){return new Hr(e).fetchJsonp(e.callbackParameterName)},Hr.prototype._makeRequest=function(e){var r=this;Yr(r.request);var n=r.request;n.url=r.url,n.requestFunction=function(){var a=e.responseType,i=lr(e.headers,r.headers),o=e.overrideMimeType,s=e.method,u=e.data,c=t.when.defer(),l=Hr._Implementations.loadWithXhr(r.url,a,s,u,i,c,o);return t.defined(l)&&t.defined(l.abort)&&(n.cancelFunction=function(){l.abort()}),c.promise};var a=Dr.request(n);if(t.defined(a))return a.then((function(e){return e})).otherwise((function(a){return n.state!==Cr.FAILED?t.when.reject(a):r.retryOnError(a).then((function(i){return i?(n.state=Cr.UNISSUED,n.deferred=void 0,r.fetch(e)):t.when.reject(a)}))}))};var Jr=/^data:(.*?)(;base64)?,(.*)$/;function Gr(e,t){var r=decodeURIComponent(t);return e?atob(r):r}function Qr(e,t){for(var r=Gr(e,t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return n}function Kr(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}Hr.prototype.fetch=function(e){return(e=Wr(e,{})).method="GET",this._makeRequest(e)},Hr.fetch=function(e){return new Hr(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.delete=function(e){return(e=Wr(e,{})).method="DELETE",this._makeRequest(e)},Hr.delete=function(e){return new Hr(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},Hr.prototype.head=function(e){return(e=Wr(e,{})).method="HEAD",this._makeRequest(e)},Hr.head=function(e){return new Hr(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.options=function(e){return(e=Wr(e,{})).method="OPTIONS",this._makeRequest(e)},Hr.options=function(e){return new Hr(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.post=function(e,t){return r.Check.defined("data",e),(t=Wr(t,{})).method="POST",t.data=e,this._makeRequest(t)},Hr.post=function(e){return new Hr(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.put=function(e,t){return r.Check.defined("data",e),(t=Wr(t,{})).method="PUT",t.data=e,this._makeRequest(t)},Hr.put=function(e){return new Hr(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr.prototype.patch=function(e,t){return r.Check.defined("data",e),(t=Wr(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},Hr.patch=function(e){return new Hr(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},Hr._Implementations={},Hr._Implementations.createImage=function(e,r,n,a,o){var s=e.url;Hr.supportsImageBitmapOptions().then((function(u){if(u&&o){var c=t.when.defer(),l=Hr._Implementations.loadWithXhr(s,"blob","GET",void 0,void 0,c,void 0,void 0,void 0);return t.defined(l)&&t.defined(l.abort)&&(e.cancelFunction=function(){l.abort()}),c.promise.then((function(e){if(t.defined(e))return Hr.createImageBitmapFromBlob(e,{flipY:a,premultiplyAlpha:!1});n.reject(new i.RuntimeError("Successfully retrieved "+s+" but it contained no content."))})).then(n.resolve)}!function(e,t,r){var n=new Image;n.onload=function(){r.resolve(n)},n.onerror=function(e){r.reject(e)},t&&(Nr.contains(e)?n.crossOrigin="use-credentials":n.crossOrigin=""),n.src=e}(s,r,n)})).otherwise(n.reject)},Hr.createImageBitmapFromBlob=function(e,t){return r.Check.defined("options",t),r.Check.typeOf.bool("options.flipY",t.flipY),r.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var $r="undefined"==typeof XMLHttpRequest;function en(e){if(e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=t.defaultValue(e.addNewLeapSeconds,!0),t.defined(e.data))rn(this,e.data);else if(t.defined(e.url)){var r=Hr.createIfNeeded(e.url),n=this;this._downloadPromise=t.when(r.fetchJson(),(function(e){rn(n,e)}),(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+r.url+"."}))}else rn(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function tn(e,t){return er.compare(e.julianDate,t)}function rn(e,r){if(t.defined(r.columnNames))if(t.defined(r.samples)){var n=r.columnNames.indexOf("modifiedJulianDateUtc"),a=r.columnNames.indexOf("xPoleWanderRadians"),i=r.columnNames.indexOf("yPoleWanderRadians"),o=r.columnNames.indexOf("ut1MinusUtcSeconds"),s=r.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=r.columnNames.indexOf("yCelestialPoleOffsetRadians"),c=r.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||a<0||i<0||o<0||s<0||u<0||c<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var l,f=e._samples=r.samples,d=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=a,e._yPoleWanderRadiansColumn=i,e._ut1MinusUtcSecondsColumn=o,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=c,e._columnCount=r.columnNames.length,e._lastIndex=void 0;for(var h=e._addNewLeapSeconds,p=0,y=f.length;p<y;p+=e._columnCount){var m=f[p+n],C=f[p+c],w=new er(m+At.MODIFIED_JULIAN_DATE_DIFFERENCE,C,zt.TAI);if(d.push(w),h){if(C!==l&&t.defined(l)){var v=er.leapSeconds,O=_t(v,w,tn);if(O<0){var b=new Rt(w,C);v.splice(~O,0,b)}}l=C}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function nn(e,t,r,n,a){var i=r*n;a.xPoleWander=t[i+e._xPoleWanderRadiansColumn],a.yPoleWander=t[i+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[i+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[i+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[i+e._ut1MinusUtcSecondsColumn]}function an(e,t,r){return t+e*(r-t)}function on(e,t,r,n,a,i,o){var s=e._columnCount;if(i>t.length-1)return o.xPoleWander=0,o.yPoleWander=0,o.xPoleOffset=0,o.yPoleOffset=0,o.ut1MinusUtc=0,o;var u=t[a],c=t[i];if(u.equals(c)||n.equals(u))return nn(e,r,a,s,o),o;if(n.equals(c))return nn(e,r,i,s,o),o;var l=er.secondsDifference(n,u)/er.secondsDifference(c,u),f=a*s,d=i*s,h=r[f+e._ut1MinusUtcSecondsColumn],p=r[d+e._ut1MinusUtcSecondsColumn],y=p-h;if(y>.5||y<-.5){var m=r[f+e._taiMinusUtcSecondsColumn],C=r[d+e._taiMinusUtcSecondsColumn];m!==C&&(c.equals(n)?h=p:p-=C-m)}return o.xPoleWander=an(l,r[f+e._xPoleWanderRadiansColumn],r[d+e._xPoleWanderRadiansColumn]),o.yPoleWander=an(l,r[f+e._yPoleWanderRadiansColumn],r[d+e._yPoleWanderRadiansColumn]),o.xPoleOffset=an(l,r[f+e._xCelestialPoleOffsetRadiansColumn],r[d+e._xCelestialPoleOffsetRadiansColumn]),o.yPoleOffset=an(l,r[f+e._yCelestialPoleOffsetRadiansColumn],r[d+e._yCelestialPoleOffsetRadiansColumn]),o.ut1MinusUtc=an(l,h,p),o}function sn(e,r,n){this.heading=t.defaultValue(e,0),this.pitch=t.defaultValue(r,0),this.roll=t.defaultValue(n,0)}Hr._Implementations.loadWithXhr=function(e,n,a,o,s,u,c){var l=Jr.exec(e);if(null===l){if(!$r){var f=new XMLHttpRequest;if(Nr.contains(e)&&(f.withCredentials=!0),f.open(a,e,!0),t.defined(c)&&t.defined(f.overrideMimeType)&&f.overrideMimeType(c),t.defined(s))for(var d in s)s.hasOwnProperty(d)&&f.setRequestHeader(d,s[d]);t.defined(n)&&(f.responseType=n);var h=!1;return"string"==typeof e&&(h=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),f.onload=function(){if(!(f.status<200||f.status>=300)||h&&0===f.status){var e=f.response,r=f.responseType;if("HEAD"===a||"OPTIONS"===a){var o=f.getAllResponseHeaders().trim().split(/[\r\n]+/),s={};return o.forEach((function(e){var t=e.split(": "),r=t.shift();s[r]=t.join(": ")})),void u.resolve(s)}if(204===f.status)u.resolve();else if(!t.defined(e)||t.defined(n)&&r!==n)if("json"===n&&"string"==typeof e)try{u.resolve(JSON.parse(e))}catch(e){u.reject(e)}else(""===r||"document"===r)&&t.defined(f.responseXML)&&f.responseXML.hasChildNodes()?u.resolve(f.responseXML):""!==r&&"text"!==r||!t.defined(f.responseText)?u.reject(new i.RuntimeError("Invalid XMLHttpRequest response type.")):u.resolve(f.responseText);else u.resolve(e)}else u.reject(new Or(f.status,f.response,f.getAllResponseHeaders()))},f.onerror=function(e){u.reject(new Or)},f.send(o),f}!function(e,t,r,n,a,o,s){var u=require("url").parse(e),c="https:"===u.protocol?require("https"):require("http"),l=require("zlib"),f={protocol:u.protocol,hostname:u.hostname,port:u.port,path:u.path,query:u.query,method:r,headers:a};c.request(f).on("response",(function(e){if(e.statusCode<200||e.statusCode>=300)o.reject(new Or(e.statusCode,e,e.headers));else{var r=[];e.on("data",(function(e){r.push(e)})),e.on("end",(function(){var n=Buffer.concat(r);"gzip"===e.headers["content-encoding"]?l.gunzip(n,(function(e,r){e?o.reject(new i.RuntimeError("Error decompressing response.")):o.resolve(Kr(r,t))})):o.resolve(Kr(n,t))}))}})).on("error",(function(e){o.reject(new Or)})).end()}(e,n,a,0,s,u)}else u.resolve(function(e,n){n=t.defaultValue(n,"");var a=e[1],i=!!e[2],o=e[3];switch(n){case"":case"text":return Gr(i,o);case"arraybuffer":return Qr(i,o);case"blob":var s=Qr(i,o);return new Blob([s],{type:a});case"document":return(new DOMParser).parseFromString(Gr(i,o),a);case"json":return JSON.parse(Gr(i,o));default:throw new r.DeveloperError("Unhandled responseType: "+n)}}(l,n))},Hr._Implementations.loadAndExecuteScript=function(e,r,n){return function(e){var r=t.when.defer(),n=document.createElement("script");n.async=!0,n.src=e;var a=document.getElementsByTagName("head")[0];return n.onload=function(){n.onload=void 0,a.removeChild(n),r.resolve()},n.onerror=function(e){r.reject(e)},a.appendChild(n),r.promise}(e).otherwise(n.reject)},Hr._DefaultImplementations={},Hr._DefaultImplementations.createImage=Hr._Implementations.createImage,Hr._DefaultImplementations.loadWithXhr=Hr._Implementations.loadWithXhr,Hr._DefaultImplementations.loadAndExecuteScript=Hr._Implementations.loadAndExecuteScript,Hr.DEFAULT=Object.freeze(new Hr({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),en.NONE=Object.freeze({getPromiseToLoad:function(){return t.when()},compute:function(e,r){return t.defined(r)?(r.xPoleWander=0,r.yPoleWander=0,r.xPoleOffset=0,r.yPoleOffset=0,r.ut1MinusUtc=0):r=new St(0,0,0,0,0),r}}),en.prototype.getPromiseToLoad=function(){return t.when(this._downloadPromise)},en.prototype.compute=function(e,r){if(t.defined(this._samples)){if(t.defined(r)||(r=new St(0,0,0,0,0)),0===this._samples.length)return r.xPoleWander=0,r.yPoleWander=0,r.xPoleOffset=0,r.yPoleOffset=0,r.ut1MinusUtc=0,r;var n=this._dates,a=this._lastIndex,o=0,s=0;if(t.defined(a)){var u=n[a],c=n[a+1],l=er.lessThanOrEquals(u,e),f=!t.defined(c),d=f||er.greaterThanOrEquals(c,e);if(l&&d)return o=a,!f&&c.equals(e)&&++o,s=o+1,on(this,n,this._samples,e,o,s,r),r}var h=_t(n,e,er.compare,this._dateColumn);return h>=0?(h<n.length-1&&n[h+1].equals(e)&&++h,o=h,s=h):(o=(s=~h)-1)<0&&(o=0),this._lastIndex=o,on(this,n,this._samples,e,o,s,r),r}if(t.defined(this._dataError))throw new i.RuntimeError(this._dataError)},sn.fromQuaternion=function(e,a){if(!t.defined(e))throw new r.DeveloperError("quaternion is required");t.defined(a)||(a=new sn);var i=2*(e.w*e.y-e.z*e.x),o=1-2*(e.x*e.x+e.y*e.y),s=2*(e.w*e.x+e.y*e.z),u=1-2*(e.y*e.y+e.z*e.z),c=2*(e.w*e.z+e.x*e.y);return a.heading=-Math.atan2(c,u),a.roll=Math.atan2(s,o),a.pitch=-n.CesiumMath.asinClamped(i),a},sn.fromDegrees=function(e,a,i,o){if(!t.defined(e))throw new r.DeveloperError("heading is required");if(!t.defined(a))throw new r.DeveloperError("pitch is required");if(!t.defined(i))throw new r.DeveloperError("roll is required");return t.defined(o)||(o=new sn),o.heading=e*n.CesiumMath.RADIANS_PER_DEGREE,o.pitch=a*n.CesiumMath.RADIANS_PER_DEGREE,o.roll=i*n.CesiumMath.RADIANS_PER_DEGREE,o},sn.clone=function(e,r){if(t.defined(e))return t.defined(r)?(r.heading=e.heading,r.pitch=e.pitch,r.roll=e.roll,r):new sn(e.heading,e.pitch,e.roll)},sn.equals=function(e,r){return e===r||t.defined(e)&&t.defined(r)&&e.heading===r.heading&&e.pitch===r.pitch&&e.roll===r.roll},sn.equalsEpsilon=function(e,r,a,i){return e===r||t.defined(e)&&t.defined(r)&&n.CesiumMath.equalsEpsilon(e.heading,r.heading,a,i)&&n.CesiumMath.equalsEpsilon(e.pitch,r.pitch,a,i)&&n.CesiumMath.equalsEpsilon(e.roll,r.roll,a,i)},sn.prototype.clone=function(e){return sn.clone(this,e)},sn.prototype.equals=function(e){return sn.equals(this,e)},sn.prototype.equalsEpsilon=function(e,t,r){return sn.equalsEpsilon(this,e,t,r)},sn.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var un,cn,ln,fn=/((?:.*\/)|^)Cesium\.js$/;function dn(e){return"undefined"==typeof document?e:(t.defined(un)||(un=document.createElement("a")),un.href=e,un.href=un.href,un.href)}function hn(){if(t.defined(cn))return cn;var e;if(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?fr("..",mn("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),a=fn.exec(n);if(null!==a)return a[1]}}(),!t.defined(e))throw new r.DeveloperError("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return(cn=new Hr({url:dn(e)})).appendForwardSlash(),cn}function pn(e){return dn(require.toUrl("../"+e))}function yn(e){return hn().getDerivedResource({url:e}).url}function mn(e){return t.defined(ln)||(ln="object"==typeof define&&t.defined(define.amd)&&!define.amd.toUrlUndefined&&t.defined(require.toUrl)?pn:yn),ln(e)}function Cn(e,t,r){this.x=e,this.y=t,this.s=r}function wn(e){e=t.defaultValue(e,t.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=Hr.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=t.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=t.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new er(this._sampleZeroJulianEphemerisDate,0,zt.TAI),this._stepSizeDays=t.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=t.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=t.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var r=this._interpolationOrder,n=this._denominators=new Array(r+1),a=this._xTable=new Array(r+1),i=Math.pow(this._stepSizeDays,r),o=0;o<=r;++o){n[o]=i,a[o]=o*this._stepSizeDays;for(var s=0;s<=r;++s)s!==o&&(n[o]*=o-s);n[o]=1/n[o]}this._work=new Array(r+1),this._coef=new Array(r+1)}mn._cesiumScriptRegex=fn,mn._buildModuleUrlFromBaseUrl=yn,mn._clearBaseResource=function(){cn=void 0},mn.setBaseUrl=function(e){cn=Hr.DEFAULT.getDerivedResource({url:e})},mn.getCesiumBaseUrl=hn;var vn=new er(0,0,zt.TAI);function On(e,t,r){var n=vn;return n.dayNumber=t,n.secondsOfDay=r,er.daysDifference(n,e._sampleZeroDateTT)}function bn(e,r){if(e._chunkDownloadsInProgress[r])return e._chunkDownloadsInProgress[r];var n,a=t.when.defer();e._chunkDownloadsInProgress[r]=a;var i=e._xysFileUrlTemplate;return n=t.defined(i)?i.getDerivedResource({templateValues:{0:r}}):new Hr({url:mn("Assets/IAU2006_XYS/IAU2006_XYS_"+r+".json")}),t.when(n.fetchJson(),(function(t){e._chunkDownloadsInProgress[r]=!1;for(var n=e._samples,i=t.samples,o=r*e._samplesPerXysFile*3,s=0,u=i.length;s<u;++s)n[o+s]=i[s];a.resolve()})),a.promise}wn.prototype.preload=function(e,r,n,a){var i=On(this,e,r),o=On(this,n,a),s=i/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);var u=o/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var c=s/this._samplesPerXysFile|0,l=u/this._samplesPerXysFile|0,f=[],d=c;d<=l;++d)f.push(bn(this,d));return t.when.all(f)},wn.prototype.computeXysRadians=function(e,r,n){var a=On(this,e,r);if(!(a<0)){var i=a/this._stepSizeDays|0;if(!(i>=this._totalSamples)){var o=this._interpolationOrder,s=i-(o/2|0);s<0&&(s=0);var u=s+o;u>=this._totalSamples&&(s=(u=this._totalSamples-1)-o)<0&&(s=0);var c=!1,l=this._samples;if(t.defined(l[3*s])||(bn(this,s/this._samplesPerXysFile|0),c=!0),t.defined(l[3*u])||(bn(this,u/this._samplesPerXysFile|0),c=!0),!c){t.defined(n)?(n.x=0,n.y=0,n.s=0):n=new Cn(0,0,0);var f,d,h=a-s*this._stepSizeDays,p=this._work,y=this._denominators,m=this._coef,C=this._xTable;for(f=0;f<=o;++f)p[f]=h-C[f];for(f=0;f<=o;++f){for(m[f]=1,d=0;d<=o;++d)d!==f&&(m[f]*=p[d]);m[f]*=y[f];var w=3*(s+f);n.x+=m[f]*l[w++],n.y+=m[f]*l[w++],n.s+=m[f]*l[w]}return n}}}};var gn={},xn={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},En={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},kn={},qn={east:new a.Cartesian3,north:new a.Cartesian3,up:new a.Cartesian3,west:new a.Cartesian3,south:new a.Cartesian3,down:new a.Cartesian3},jn=new a.Cartesian3,_n=new a.Cartesian3,Sn=new a.Cartesian3;gn.localFrameToFixedFrameGenerator=function(e,i){if(!xn.hasOwnProperty(e)||!xn[e].hasOwnProperty(i))throw new r.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var o,s=xn[e][i],u=e+i;return t.defined(kn[u])?o=kn[u]:(o=function(o,u,c){if(!t.defined(o))throw new r.DeveloperError("origin is required.");if(t.defined(c)||(c=new k),a.Cartesian3.equalsEpsilon(o,a.Cartesian3.ZERO,n.CesiumMath.EPSILON14))a.Cartesian3.unpack(En[e],0,jn),a.Cartesian3.unpack(En[i],0,_n),a.Cartesian3.unpack(En[s],0,Sn);else if(n.CesiumMath.equalsEpsilon(o.x,0,n.CesiumMath.EPSILON14)&&n.CesiumMath.equalsEpsilon(o.y,0,n.CesiumMath.EPSILON14)){var l=n.CesiumMath.sign(o.z);a.Cartesian3.unpack(En[e],0,jn),"east"!==e&&"west"!==e&&a.Cartesian3.multiplyByScalar(jn,l,jn),a.Cartesian3.unpack(En[i],0,_n),"east"!==i&&"west"!==i&&a.Cartesian3.multiplyByScalar(_n,l,_n),a.Cartesian3.unpack(En[s],0,Sn),"east"!==s&&"west"!==s&&a.Cartesian3.multiplyByScalar(Sn,l,Sn)}else{(u=t.defaultValue(u,a.Ellipsoid.WGS84)).geodeticSurfaceNormal(o,qn.up);var f=qn.up,d=qn.east;d.x=-o.y,d.y=o.x,d.z=0,a.Cartesian3.normalize(d,qn.east),a.Cartesian3.cross(f,d,qn.north),a.Cartesian3.multiplyByScalar(qn.up,-1,qn.down),a.Cartesian3.multiplyByScalar(qn.east,-1,qn.west),a.Cartesian3.multiplyByScalar(qn.north,-1,qn.south),jn=qn[e],_n=qn[i],Sn=qn[s]}return c[0]=jn.x,c[1]=jn.y,c[2]=jn.z,c[3]=0,c[4]=_n.x,c[5]=_n.y,c[6]=_n.z,c[7]=0,c[8]=Sn.x,c[9]=Sn.y,c[10]=Sn.z,c[11]=0,c[12]=o.x,c[13]=o.y,c[14]=o.z,c[15]=1,c},kn[u]=o),o},gn.eastNorthUpToFixedFrame=gn.localFrameToFixedFrameGenerator("east","north"),gn.northEastDownToFixedFrame=gn.localFrameToFixedFrameGenerator("north","east"),gn.northUpEastToFixedFrame=gn.localFrameToFixedFrameGenerator("north","up"),gn.northWestUpToFixedFrame=gn.localFrameToFixedFrameGenerator("north","west");var Mn=new Ke,Tn=new a.Cartesian3(1,1,1),Dn=new k;gn.headingPitchRollToFixedFrame=function(e,n,i,o,s){r.Check.typeOf.object("HeadingPitchRoll",n),o=t.defaultValue(o,gn.eastNorthUpToFixedFrame);var u=Ke.fromHeadingPitchRoll(n,Mn),c=k.fromTranslationQuaternionRotationScale(a.Cartesian3.ZERO,u,Tn,Dn);return s=o(e,i,s),k.multiply(s,c,s)};var Rn=new k,An=new l;gn.headingPitchRollQuaternion=function(e,t,n,a,i){r.Check.typeOf.object("HeadingPitchRoll",t);var o=gn.headingPitchRollToFixedFrame(e,t,n,a,Rn),s=k.getMatrix3(o,An);return Ke.fromRotationMatrix(s,i)};var zn=new a.Cartesian3(1,1,1),In=new a.Cartesian3,Pn=new k,Nn=new k,Un=new l,Fn=new Ke;gn.fixedFrameToHeadingPitchRoll=function(e,n,i,o){r.Check.defined("transform",e),n=t.defaultValue(n,a.Ellipsoid.WGS84),i=t.defaultValue(i,gn.eastNorthUpToFixedFrame),t.defined(o)||(o=new sn);var s=k.getTranslation(e,In);if(a.Cartesian3.equals(s,a.Cartesian3.ZERO))return o.heading=0,o.pitch=0,o.roll=0,o;var u=k.inverseTransformation(i(s,n,Pn),Pn),c=k.setScale(e,zn,Nn);c=k.setTranslation(c,a.Cartesian3.ZERO,c),u=k.multiply(u,c,u);var l=Ke.fromRotationMatrix(k.getMatrix3(u,Un),Fn);return l=Ke.normalize(l,l),sn.fromQuaternion(l,o)};var Vn=n.CesiumMath.TWO_PI/86400,Ln=new er;gn.computeTemeToPseudoFixedMatrix=function(e,a){if(!t.defined(e))throw new r.DeveloperError("date is required.");var i,o=(Ln=er.addSeconds(e,-er.computeTaiMinusUtc(e),Ln)).dayNumber,s=Ln.secondsOfDay,u=o-2451545,c=(24110.54841+(i=s>=43200?(u+.5)/At.DAYS_PER_JULIAN_CENTURY:(u-.5)/At.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+i*(.093104+-62e-7*i)))*Vn%n.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(o-2451545.5))*((s+.5*At.SECONDS_PER_DAY)%At.SECONDS_PER_DAY),f=Math.cos(c),d=Math.sin(c);return t.defined(a)?(a[0]=f,a[1]=-d,a[2]=0,a[3]=d,a[4]=f,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a):new l(f,d,0,-d,f,0,0,0,1)},gn.iau2006XysData=new wn,gn.earthOrientationParameters=en.NONE;gn.preloadIcrfFixed=function(e){var r=e.start.dayNumber,n=e.start.secondsOfDay+32.184,a=e.stop.dayNumber,i=e.stop.secondsOfDay+32.184,o=gn.iau2006XysData.preload(r,n,a,i),s=gn.earthOrientationParameters.getPromiseToLoad();return t.when.all([o,s])},gn.computeIcrfToFixedMatrix=function(e,n){if(!t.defined(e))throw new r.DeveloperError("date is required.");t.defined(n)||(n=new l);var a=gn.computeFixedToIcrfMatrix(e,n);if(t.defined(a))return l.transpose(a,n)};var Bn=new Cn(0,0,0),Wn=new St(0,0,0,0,0,0),Yn=new l,Zn=new l;gn.computeFixedToIcrfMatrix=function(e,a){if(!t.defined(e))throw new r.DeveloperError("date is required.");t.defined(a)||(a=new l);var i=gn.earthOrientationParameters.compute(e,Wn);if(t.defined(i)){var o=e.dayNumber,s=e.secondsOfDay+32.184,u=gn.iau2006XysData.computeXysRadians(o,s,Bn);if(t.defined(u)){var c=u.x+i.xPoleOffset,f=u.y+i.yPoleOffset,d=1/(1+Math.sqrt(1-c*c-f*f)),h=Yn;h[0]=1-d*c*c,h[3]=-d*c*f,h[6]=c,h[1]=-d*c*f,h[4]=1-d*f*f,h[7]=f,h[2]=-c,h[5]=-f,h[8]=1-d*(c*c+f*f);var p=l.fromRotationZ(-u.s,Zn),y=l.multiply(h,p,Yn),m=e.dayNumber-2451545,C=(e.secondsOfDay-er.computeTaiMinusUtc(e)+i.ut1MinusUtc)/At.SECONDS_PER_DAY,w=.779057273264+C+.00273781191135448*(m+C);w=w%1*n.CesiumMath.TWO_PI;var v=l.fromRotationZ(w,Zn),O=l.multiply(y,v,Yn),b=Math.cos(i.xPoleWander),g=Math.cos(i.yPoleWander),x=Math.sin(i.xPoleWander),E=Math.sin(i.yPoleWander),k=o-2451545+s/At.SECONDS_PER_DAY,q=-47e-6*(k/=36525)*n.CesiumMath.RADIANS_PER_DEGREE/3600,j=Math.cos(q),_=Math.sin(q),S=Zn;return S[0]=b*j,S[1]=b*_,S[2]=x,S[3]=-g*_+E*x*j,S[4]=g*j+E*x*_,S[5]=-E*b,S[6]=-E*_-g*x*j,S[7]=E*j-g*x*_,S[8]=g*b,l.multiply(O,S,a)}}};var Hn=new O;gn.pointToWindowCoordinates=function(e,t,r,n){return(n=gn.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},gn.pointToGLWindowCoordinates=function(e,n,a,i){if(!t.defined(e))throw new r.DeveloperError("modelViewProjectionMatrix is required.");if(!t.defined(n))throw new r.DeveloperError("viewportTransformation is required.");if(!t.defined(a))throw new r.DeveloperError("point is required.");t.defined(i)||(i=new o.Cartesian2);var s=Hn;return k.multiplyByVector(e,O.fromElements(a.x,a.y,a.z,1,s),s),O.multiplyByScalar(s,1/s.w,s),k.multiplyByVector(n,s,s),o.Cartesian2.fromCartesian4(s,i)};var Xn=new a.Cartesian3,Jn=new a.Cartesian3,Gn=new a.Cartesian3;gn.rotationMatrixFromPositionVelocity=function(e,i,o,s){if(!t.defined(e))throw new r.DeveloperError("position is required.");if(!t.defined(i))throw new r.DeveloperError("velocity is required.");var u=t.defaultValue(o,a.Ellipsoid.WGS84).geodeticSurfaceNormal(e,Xn),c=a.Cartesian3.cross(i,u,Jn);a.Cartesian3.equalsEpsilon(c,a.Cartesian3.ZERO,n.CesiumMath.EPSILON6)&&(c=a.Cartesian3.clone(a.Cartesian3.UNIT_X,c));var f=a.Cartesian3.cross(c,i,Gn);return a.Cartesian3.normalize(f,f),a.Cartesian3.cross(i,f,c),a.Cartesian3.negate(c,c),a.Cartesian3.normalize(c,c),t.defined(s)||(s=new l),s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=c.x,s[4]=c.y,s[5]=c.z,s[6]=f.x,s[7]=f.y,s[8]=f.z,s};var Qn=new k(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Kn=new a.Cartographic,$n=new a.Cartesian3,ea=new a.Cartesian3,ta=new l,ra=new k,na=new k;gn.basisTo2D=function(e,n,i){if(!t.defined(e))throw new r.DeveloperError("projection is required.");if(!t.defined(n))throw new r.DeveloperError("matrix is required.");if(!t.defined(i))throw new r.DeveloperError("result is required.");var o=k.getTranslation(n,ea),s=e.ellipsoid,u=s.cartesianToCartographic(o,Kn),c=e.project(u,$n);a.Cartesian3.fromElements(c.z,c.x,c.y,c);var l=gn.eastNorthUpToFixedFrame(o,s,ra),f=k.inverseTransformation(l,na),d=k.getMatrix3(n,ta),h=k.multiplyByMatrix3(f,d,i);return k.multiply(Qn,h,i),k.setTranslation(i,c,i),i},gn.wgs84To2DModelMatrix=function(e,n,i){if(!t.defined(e))throw new r.DeveloperError("projection is required.");if(!t.defined(n))throw new r.DeveloperError("center is required.");if(!t.defined(i))throw new r.DeveloperError("result is required.");var o=e.ellipsoid,s=gn.eastNorthUpToFixedFrame(n,o,ra),u=k.inverseTransformation(s,na),c=o.cartesianToCartographic(n,Kn),l=e.project(c,$n);a.Cartesian3.fromElements(l.z,l.x,l.y,l);var f=k.fromTranslation(l,ra);return k.multiply(Qn,u,i),k.multiply(f,i,i),i},e.BoundingSphere=P,e.Cartesian4=O,e.FeatureDetection=Qe,e.GeographicProjection=s,e.Intersect=u,e.Interval=c,e.Matrix3=l,e.Matrix4=k,e.Quaternion=Ke,e.Resource=Hr,e.Transforms=gn,e.buildModuleUrl=mn}));
//# sourceMappingURL=Transforms-c20c38d0.js.map
